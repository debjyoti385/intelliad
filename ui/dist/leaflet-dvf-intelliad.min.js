L.LinearFunction=L.Class.extend({initialize:function(b,a,c){this.setOptions(c);this.setRange(b,a)},_calculateParameters:function(a,b){if(this._xRange===0){this._slope=0;this._b=a.y}else{this._slope=(b.y-a.y)/this._xRange;this._b=a.y-this._slope*a.x}},_arrayToPoint:function(a){return{x:a[0],y:a[1]}},setOptions:function(a){L.Util.setOptions(this,a);this._preProcess=this.options.preProcess;this._postProcess=this.options.postProcess},getBounds:function(){var b=Math.min(this._minPoint.x,this._maxPoint.x);var a=Math.max(this._minPoint.x,this._maxPoint.x);var d=Math.min(this._minPoint.y,this._maxPoint.y);var c=Math.max(this._minPoint.y,this._maxPoint.y);return[new L.Point(b,d),new L.Point(a,c)]},setRange:function(a,b){a=a instanceof Array?this._arrayToPoint(a):a;b=b instanceof Array?this._arrayToPoint(b):b;this._minPoint=a;this._maxPoint=b;this._xRange=b.x-a.x;this._calculateParameters(a,b);return this},setMin:function(a){this.setRange(a,this._maxPoint);return this},setMax:function(a){this.setRange(this._minPoint,a);return this},setPreProcess:function(a){this._preProcess=a;return this},setPostProcess:function(a){this._postProcess=a;return this},evaluate:function(a){var b;if(this._preProcess){a=this._preProcess(a)}b=Number((this._slope*a).toFixed(6))+Number(this._b.toFixed(6));if(this._postProcess){b=this._postProcess(b)}return b},random:function(){var a=Math.random()*this._xRange+this._minPoint.x;return this.evaluate(a)},sample:function(c){c=Math.max(c,2);var d=c-1;var e=this._xRange/d;var a=this._minPoint.x;var b=[];while(a<=this._maxPoint.x){b.push(this.evaluate(a));a+=e}return b},samplePoints:function(c){c=Math.max(c,2);var d=c-1;var e=this._xRange/d;var a=this._minPoint.x;var b=[];while(a<=this._maxPoint.x){b.push(new L.Point(a,this.evaluate(a)));a+=e}return b},getIntersectionPoint:function(d){var a=null;if(this._slope!==d._slope){var c=(this._b-d._b)/(d._slope-this._slope);var b=this.evaluate(c);a=new L.Point(c,b)}return a}});L.ColorFunction=L.LinearFunction.extend({options:{alpha:1,includeAlpha:false},initialize:function(c,b,d){L.Util.setOptions(this,d);this._parts=[];this._dynamicPart=null;this._outputPrecision=0;this._prefix=null;this._formatOutput=function(e){return e.toFixed(this._outputPrecision)},this._mapOutput=function(h){var e=[];for(var f=0;f<this._parts.length;++f){var g=this._parts[f];e.push(h[g])}if(this.options.includeAlpha){e.push(this.options.alpha)}return e};this._getColorString=function(f){f=this._formatOutput(f);this.options[this._dynamicPart]=f;var e=this._mapOutput(this.options);return this._writeColor(this._prefix,e)};this._writeColor=function(f,e){if(this.options.includeAlpha){f+="a"}return f+"("+e.join(",")+")"};d=this.options;var a=function(f){if(d&&d.postProcess){f=d.postProcess.call(this,f)}var e=this._getColorString(f);if(L.Browser.ie&&e.indexOf("hsl")>-1||d.rgb){e=L.hslColor(e).toRGBString()}return e};L.LinearFunction.prototype.initialize.call(this,c,b,{preProcess:this.options.preProcess,postProcess:a})}});L.HSLColorFunction=L.ColorFunction.extend({initialize:function(b,a,c){L.ColorFunction.prototype.initialize.call(this,b,a,c);this._parts=["outputHue","outputSaturation","outputLuminosity"];this._prefix="hsl";this._outputPrecision=2}});L.RGBColorFunction=L.ColorFunction.extend({initialize:function(b,a,c){L.ColorFunction.prototype.initialize.call(this,b,a,c);this._parts=["outputRed","outputBlue","outputGreen"];this._prefix="rgb";this._outputPrecision=0}});L.RGBRedFunction=L.LinearFunction.extend({options:{outputGreen:0,outputBlue:0},initialize:function(b,a,c){L.RGBColorFunction.prototype.initialize.call(this,b,a,c);this._dynamicPart="outputRed"}});L.RGBBlueFunction=L.LinearFunction.extend({options:{outputRed:0,outputGreen:0},initialize:function(b,a,c){L.RGBColorFunction.prototype.initialize.call(this,b,a,c);this._dynamicPart="outputBlue"}});L.RGBGreenFunction=L.LinearFunction.extend({options:{outputRed:0,outputBlue:0},initialize:function(b,a,c){L.RGBColorFunction.prototype.initialize.call(this,b,a,c);this._dynamicPart="outputGreen"}});L.RGBColorBlendFunction=L.LinearFunction.extend({initialize:function(g,i,h,e){h=new L.RGBColor(h);e=new L.RGBColor(e);var b=h.r();var d=e.r();var c=h.g();var f=e.g();var a=h.b();var j=e.b();this._minX=g;this._maxX=i;this._redFunction=new L.LinearFunction(new L.Point(g,b),new L.Point(i,d));this._greenFunction=new L.LinearFunction(new L.Point(g,c),new L.Point(i,f));this._blueFunction=new L.LinearFunction(new L.Point(g,a),new L.Point(i,j))},getBounds:function(){var c=this._redFunction.getBounds();var d=this._greenFunction.getBounds();var e=this._blueFunction.getBounds();var b=Math.min(c[0].y,d[0].y,e[0].y);var a=Math.max(c[0].y,d[0].y,e[0].y);return[new L.Point(c[0].x,b),new L.Point(c[1].x,a)]},evaluate:function(a){return new L.RGBColor([this._redFunction.evaluate(a),this._greenFunction.evaluate(a),this._blueFunction.evaluate(a)]).toRGBString()}});L.HSLHueFunction=L.HSLColorFunction.extend({options:{outputSaturation:"100%",outputLuminosity:"50%"},initialize:function(b,a,c){L.HSLColorFunction.prototype.initialize.call(this,b,a,c);this._dynamicPart="outputHue"}});L.HSLSaturationFunction=L.LinearFunction.extend({options:{outputHue:0,outputLuminosity:"50%"},initialize:function(b,a,c){L.HSLColorFunction.prototype.initialize.call(this,b,a,c);this._formatOutput=function(d){return(d*100).toFixed(this._outputPrecision)+"%"};this._dynamicPart="outputSaturation"}});L.HSLLuminosityFunction=L.LinearFunction.extend({options:{outputHue:0,outputSaturation:"100%"},initialize:function(b,a,c){L.HSLColorFunction.prototype.initialize.call(this,b,a,c);this._formatOutput=function(d){return(d*100).toFixed(this._outputPrecision)+"%"};this._dynamicPart="outputLuminosity"}});L.HSLColorBlendFunction=L.LinearFunction.extend({initialize:function(e,h,j,f){j=new L.HSLColor(j);f=new L.HSLColor(f);var i=j.h();var g=f.h();var d=j.s();var c=f.s();var a=j.l();var b=f.l();this._minX=e;this._maxX=h;this._hueFunction=new L.LinearFunction(new L.Point(e,i),new L.Point(h,g));this._saturationFunction=new L.LinearFunction(new L.Point(e,d),new L.Point(h,c));this._luminosityFunction=new L.LinearFunction(new L.Point(e,a),new L.Point(h,b))},getBounds:function(){var e=this._hueFunction.getBounds();var a=this._saturationFunction.getBounds();var c=this._luminosityFunction.getBounds();var b=Math.min(e[0].y,a[0].y,c[0].y);var d=Math.max(e[0].y,a[0].y,c[0].y);return[new L.Point(e[0].x,b),new L.Point(e[1].x,d)]},evaluate:function(a){return new L.HSLColor([this._hueFunction.evaluate(a),this._saturationFunction.evaluate(a),this._luminosityFunction.evaluate(a)]).toHSLString()}});L.PiecewiseFunction=L.LinearFunction.extend({initialize:function(b,c){L.Util.setOptions(this,c);this._functions=b;var a;var d;a=b[0].getBounds()[0];d=b[b.length-1].getBounds()[1];L.LinearFunction.prototype.initialize.call(this,a,d,{preProcess:this.options.preProcess,postProcess:this.options.postProcess})},_getFunction:function(f){var c;var e;var d;var g=false;var a;for(var b=0;b<this._functions.length;++b){a=this._functions[b];c=a.getBounds();e=c[0];d=c[1];if(f>=e.x&&f<d.x){g=true;break}}return g?a:this._functions[this._functions.length-1]},evaluate:function(a){var b;var c=null;if(this._preProcess){a=this._preProcess(a)}b=this._getFunction(a);if(b){c=b.evaluate(a);if(this._postProcess){c=this._postProcess(c)}}return c}});L.CustomColorFunction=L.PiecewiseFunction.extend({options:{interpolate:true},initialize:function(f,j,g,d){var b=j-f;var k=b/(g.length-1);var h=[];var a;L.Util.setOptions(this,d);for(var e=0;e<g.length;++e){var c=Math.min(e+1,g.length-1);a=this.options.interpolate?new L.RGBColorBlendFunction(f+k*e,f+k*c,g[e],g[c]):new L.RGBColorBlendFunction(f+k*e,f+k*c,g[e],g[e]);h.push(a)}L.PiecewiseFunction.prototype.initialize.call(this,h)}});L.CategoryFunction=L.Class.extend({initialize:function(b,a){L.Util.setOptions(this,a);this._categoryKeys=Object.keys(b);this._categoryMap=b;this._preProcess=this.options.preProcess;this._postProcess=this.options.postProcess},evaluate:function(a){var b;if(this._preProcess){a=this._preProcess(a)}b=this._categoryMap[a];if(this._postProcess){b=this._postProcess(b)}return b},getCategories:function(){return this._categoryKeys}});if(!Array.prototype.indexOf){Array.prototype.indexOf=function(d,c){for(var b=c||0,a=this.length;b<a;b++){if(this[b]===d){return b}}return -1}}if(!Object.keys){Object.keys=function(){var d=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=c.length;return function(g){var e,f,h;if(typeof g!=="object"&&typeof g!=="function"||g===null){throw new TypeError("Object.keys called on non-object")}e=[];for(f in g){if(d.call(g,f)){e.push(f)}}if(b){for(h=0;h<a;h++){if(d.call(g,c[h])){e.push(c[h])}}}return e}}()}L.Util.guid=function(){var a=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};L.Util.getProperty=function(c,b,a){return b in c?c[b]:a};L.Util.setFieldValue=function(d,c,e){var a=c.split(".");var f=d;var b;for(var g=0;g<a.length-1;++g){b=a[g];f[b]=f[b]||{};f=f[b]}f[a[a.length-1]]=e};L.Util.getFieldValue=function(e,a){var m=null;if(a){var d=a.split(".");var j=e;var c;var h;var b;var k;var f;var l;var i=-1;var g;for(var o=0;o<d.length;++o){c=d[o];i=c.indexOf("[");if(i>-1){l=c.substring(i);c=c.substring(0,i);l=l.replace("[","").replace("]","");h=l.split("=");b=h[0];k=h[1];j=j[c];for(var n=0;n<j.length;++n){f=j[n];g=f[b];if(g&&g===k){j=f}}}else{if(j&&j.hasOwnProperty(c)){j=j[c]}else{j=null;break}}}m=j}else{m=e}return m};L.Util.getNumericRange=function(g,b){var a=Number.MAX_VALUE;var c=Number.MIN_VALUE;for(var f in g){if(g.hasOwnProperty(f)){var d=g[f];var e=L.Util.getFieldValue(d,b);a=Math.min(a,e);c=Math.max(c,e)}}return[a,c]};L.Util.pointToGeoJSON=function(){var a={type:"Feature",geometry:{type:"Point",coordinates:[this._latlng[1],this._latlng[0]]},properties:{}};for(var b in this.options){if(this.options.hasOwnProperty(b)){var c=this.options[b];if(typeof c!=="function"){a.properties[b]=c}}}return a};L.Util.updateLayer=function(a,b){if(a.eachLayer&&!a instanceof L.FeatureGroup){a.eachLayer(function(c){L.Util.updateLayer(c,b)})}else{b.call(this,a)}};L.CategoryLegend=L.Class.extend({initialize:function(a){L.Util.setOptions(this,a)},generate:function(e){e=e||{};var i=document.createElement("div");var g=L.DomUtil.create("div","legend",i);var f=e.className;var d=this.options;if(f){L.DomUtil.addClass(g,f)}if(e.title){L.DomUtil.create("div","legend-title",g).innerHTML=e.title}for(var c in d){categoryOptions=d[c];var a=categoryOptions.displayName||c;var h=L.DomUtil.create("div","data-layer-legend",g);var b=L.DomUtil.create("div","legend-box",h);L.DomUtil.create("div","key",h).innerHTML=a;L.StyleConverter.applySVGStyle(b,categoryOptions)}return i.innerHTML}});L.LegendIcon=L.DivIcon.extend({initialize:function(j,c,e){var k=document.createElement("div");var i=L.DomUtil.create("div","legend",k);var g=L.DomUtil.create("div","title",i);var a=L.DomUtil.create("div","legend-box",i);var h=L.DomUtil.create("div","legend-values",i);var d;var f=c.title||c.name;if(f){g.innerHTML=f}for(var b in j){d=j[b];L.DomUtil.create("div","key",h).innerHTML=d.name||b;L.DomUtil.create("div","value",h).innerHTML=d.value}L.StyleConverter.applySVGStyle(a,c);a.style.height="5px";e.html=k.innerHTML;e.className=e.className||"legend-icon";L.DivIcon.prototype.initialize.call(this,e)}});L.legendIcon=function(a,c,b){return new L.LegendIcon(a,c,b)};L.GeometryUtils={getName:function(a){var b=null;if(a&&a.features){for(var d=0;d<a.features.length;++d){var c=a.features[d];if(c.properties&&c.properties.name){b=c.properties.name;break}}}return b},getGeoJSONLocation:function(a,d,c,f){var e=new L.GeoJSON(a,{pointToLayer:function(j,i){var h={location:i,text:c?L.Util.getFieldValue(d,c):[i.lat.toFixed(3),i.lng.toFixed(3)].join(", "),center:i};return f(h,d)}});var b=null;try{b=L.GeometryUtils.loadCentroid(a)}catch(g){console.log("Error loading centroid for "+JSON.stringify(a))}return{location:e,text:c?L.Util.getFieldValue(d,c):null,center:b}},mergeProperties:function(e,a,b){var c=a.features;var k=L.GeometryUtils.indexFeatureCollection(c,b);var f;var d;var g={type:"FeatureCollection",features:[]};for(var h in e){if(e.hasOwnProperty(h)){f=e[h];d=f[b];if(d){var j=k[d];for(var i in f){j.properties[i]=f[i]}g.features.push(j)}}}return g},indexFeatureCollection:function(a,f){var c=a.features;var i;var d;var e={};var g;for(var h=0;h<c.length;++h){i=c[h];d=i.properties;g=d[f];if(g in e){var b=e[g];if(b.geometry.type!=="GeometryCollection"){e[g]={type:"Feature",geometry:{type:"GeometryCollection",geometries:[i.geometry,b.geometry]}}}else{b.geometry.geometries.push(i.geometry)}}else{e[g]=i}}return e},arrayToMap:function(e,f,c){var a={};var d;var h;var b;for(var g=0;g<e.length;++g){d=e[g];h=d[f];b=c?d[c]:d;a[h]=b}return a},arrayToMaps:function(k,b){var a;var c;var h;var m;var d=[];var j;var f;var n;for(var l=0;l<b.length;++l){d.push({})}for(var e=0;e<k.length;++e){c=k[e];for(var g=0;g<b.length;++g){a=d[g];j=b[g];f=j.from;n=j.to;h=c[f];m=n?c[n]:c;a[h]=m}}return d},loadCentroid:function(k){var b=null;var c;var g,h;if(k.geometry&&k.geometry.type==="Point"){b=new L.LatLng(k.geometry.coordinates[1],k.geometry.coordinates[0])}else{if(typeof jsts!=="undefined"){var j=new jsts.io.GeoJSONParser();var a=j.read(k);if(a.getCentroid){c=a.getCentroid();g=c.coordinate.x;h=c.coordinate.y}else{if(a.features){var d=0;var f=0;for(var e=0;e<a.features.length;++e){c=a.features[e].geometry.getCentroid();d+=c.coordinate.x;f+=c.coordinate.y}g=d/a.features.length;h=f/a.features.length}else{c=a.geometry.getCentroid();g=c.coordinate.x;h=c.coordinate.y}}b=new L.LatLng(h,g)}}return b},loadCentroids:function(c){var d={};var b;for(var a in c){b=c[a];d[a]=L.GeometryUtils.loadCentroid(b)}return d}};L.SVGPathBuilder=L.Class.extend({initialize:function(a,b,c){this._points=a||[];this._innerPoints=b||[];L.Util.setOptions(this,c)},options:{closePath:true},_getPathString:function(b,e){var c="";if(b.length>0){var f=b[0];var e=e!==null?e:2;var a="M";var d="L";var g="Z";if(L.Browser.vml){e=0;a="m";d="l";g="xe"}c=a+f.x.toFixed(e)+","+f.y.toFixed(e);for(var h=1;h<b.length;h++){f=b[h];c+=d+f.x.toFixed(e)+","+f.y.toFixed(e)}if(this.options.closePath){c+=g}}return c},addPoint:function(a,b){b?this._innerPoints.push(a):this._points.push(a)},build:function(b){b=b||this.options.digits;var a=this._getPathString(this._points,b);if(this._innerPoints){a+=this._getPathString(this._innerPoints,b)}return a}});L.StyleConverter={keyMap:{fillColor:{property:["background-color"],valueFunction:function(a){return a}},color:{property:["color","border-top-color","border-right-color","border-bottom-color","border-left-color"],valueFunction:function(a){return a}},weight:{property:["border-width"],valueFunction:function(a){return Math.ceil(a)+"px"}},stroke:{property:["border-style"],valueFunction:function(a){return a===true?"solid":"none"}},dashArray:{property:["border-style"],valueFunction:function(a){var b="solid";if(a){b="dashed"}return b}},barThickness:{property:["height"],valueFunction:function(a){return a+"px"}},radius:{property:["height"],valueFunction:function(a){return 2*a+"px"}},fillOpacity:{property:["opacity"],valueFunction:function(a){return a}}},applySVGStyle:function(a,c,b){var d=L.StyleConverter.keyMap;if(b){d=L.Util.extend(d,b)}a.style.borderStyle="solid";for(var e in c){L.StyleConverter.setCSSProperty(a,e,c[e],d)}return a},setCSSProperty:function(c,g,f,e){var e=e||L.StyleConverter.keyMap;var d=e[g];var h="";if(d){var b=d.property;for(var a=0,i=b.length;a<i;++a){h+=b[a]+":"+d.valueFunction(f)+";"}}c.style.cssText+=h;return c}};L.StylesBuilder=L.Class.extend({initialize:function(a,b){this._categories=a;this._styleFunctionMap=b;this._buildStyles()},_buildStyles:function(){var a={};var b;var d;var c;for(var f=0;f<this._categories.length;++f){b=this._categories[f];a[b]={};for(var e in this._styleFunctionMap){d=this._styleFunctionMap[e];c=d.evaluate?d.evaluate(f):typeof d==="function"?d(f):d;a[b][e]=c}}this._styleMap=a},getStyles:function(){return this._styleMap}});L.PaletteBuilder=L.Class.extend({initialize:function(a){this._styleFunctionMap=a},generate:function(f){f=f||{};var k=document.createElement("div");var a=L.DomUtil.create("div","palette",k);var b=f.count||10;var c=function(l){var n=[];for(var m=0;m<l;++m){n.push(m)}return n}(b);var e=new L.StylesBuilder(c,this._styleFunctionMap);var h=e.getStyles();if(f.className){L.DomUtil.addClass(a,f.className)}for(var j in h){var g=L.DomUtil.create("i","palette-element",a);var d=h[j];L.StyleConverter.applySVGStyle(g,d)}return k.innerHTML}});L.HTMLUtils={buildTable:function(i,f,e){f=f||"table table-condensed table-striped table-bordered";var c=L.DomUtil.create("table",f);var a=L.DomUtil.create("thead","",c);var b=L.DomUtil.create("tbody","",c);a.innerHTML="<tr><th>Name</th><th>Value</th></tr>";e=e||[];function g(n,o){for(var m=0,k=n.length;m<k;m++){if(n[m]===o){return true}}return false}for(var d in i){if(i.hasOwnProperty(d)&&!g(e,d)){var h=i[d];if(typeof h==="object"){var j=document.createElement("div");j.appendChild(L.HTMLUtils.buildTable(h,e));h=j.innerHTML}b.innerHTML+="<tr><td>"+d+"</td><td>"+h+"</td></tr>"}}return c}};L.AnimationUtils={animate:function(k,c,l,b){var a=b.delay||0;var n=b.frames||30;var f=b.duration||500;var g={};var i=b.easeFunction||function(p){return p};var d=b.complete;var h=f/n;for(var j in c){if(j!="color"&&j!="fillColor"&&l[j]){g[j]=new L.LinearFunction([0,c[j]],[n-1,l[j]])}else{if(j=="color"||j=="fillColor"){g[j]=new L.RGBColorBlendFunction(0,n-1,c[j],l[j])}}}var o={};var e=0;var m=function(){for(var p in g){o[p]=g[p].evaluate(e)}k.options=L.extend({},k.options,o);k.setStyle(k.options).redraw();e++;h=i(h);if(e<n){setTimeout(m,h)}else{d()}};setTimeout(m,a)}};L.Color=L.Class.extend({initialize:function(a){this._rgb=[0,0,0];this._hsl=[0,1,0.5];this._a=1;if(a){this.parseColorDef(a)}},parseColorDef:function(a){},rgbToHSL:function(c,f,a){c/=255,f/=255,a/=255;var k=Math.max(c,f,a),e=Math.min(c,f,a);var m,j,n=(k+e)/2;if(k==e){m=j=0}else{var i=k-e;j=n>0.5?i/(2-k-e):i/(k+e);switch(k){case c:m=(f-a)/i+(f<a?6:0);break;case f:m=(a-c)/i+2;break;case a:m=(c-f)/i+4;break}m/=6}return[m,j,n]},hslToRGB:function(j,d,m){var c,i,a;if(d==0){c=i=a=m}else{function k(b,g,h){if(h<0){h+=1}if(h>1){h-=1}if(h<1/6){return b+(g-b)*6*h}if(h<1/2){return g}if(h<2/3){return b+(g-b)*(2/3-h)*6}return b}var f=m<0.5?m*(1+d):m+d-m*d;var e=2*m-f;c=k(e,f,j+1/3);i=k(e,f,j);a=k(e,f,j-1/3)}return[Math.floor(c*255),Math.floor(i*255),Math.floor(a*255)]},setRGB:function(c,d,a){this._rgb=[c,d,a];this._hsl=this.rgbToHSL(c,d,a);return this},setHSL:function(b,a,c){this._hsl=[b,a,c];this._rgb=this.hslToRGB(b,a,c);return this},toHSL:function(){return this._hsl},toHSLString:function(){var a="hsl";if(this._a<1){a+="a"}return a+"("+(this._hsl[0]*360).toFixed(1)+","+(this._hsl[1]*100).toFixed(0)+"%,"+(this._hsl[2]*100).toFixed(0)+"%)"},toRGB:function(){return this._rgb},toRGBString:function(){var a;if(this._a<1){a="rgba("+this._rgb[0].toFixed(0)+","+this._rgb[1].toFixed(0)+","+this._rgb[2].toFixed(0)+","+this._a.toFixed(1)+")"}else{var c=[this._rgb[0].toString(16),this._rgb[1].toString(16),this._rgb[2].toString(16)];for(var b=0;b<c.length;++b){if(c[b].length===1){c[b]="0"+c[b]}}a="#"+c.join("")}return a},r:function(a){if(!arguments.length){return this._rgb[0]}return this.setRGB(a,this._rgb[1],this._rgb[2])},g:function(a){if(!arguments.length){return this._rgb[1]}return this.setRGB(this._rgb[0],a,this._rgb[2])},b:function(a){if(!arguments.length){return this._rgb[2]}return this.setRGB(this._rgb[0],this._rgb[1],a)},h:function(a){if(!arguments.length){return this._hsl[0]}return this.setHSL(a,this._hsl[1],this._hsl[2])},s:function(a){if(!arguments.length){return this._hsl[1]}return this.setHSL(this._hsl[0],a,this._hsl[2])},l:function(a){if(!arguments.length){return this._hsl[2]}return this.setHSL(this._hsl[0],this._hsl[1],a)},a:function(a){if(!arguments.length){return this._a}this._a=a;return this}});L.RGBColor=L.Color.extend({initialize:function(a){L.Color.prototype.initialize.call(this,a)},parseColorDef:function(e){var j=e instanceof Array;var i=e.indexOf("#")===0;var k=[];var d,h,c,f;if(j){d=Math.floor(e[0]);h=Math.floor(e[1]);c=Math.floor(e[2]);f=e.length===4?e[3]:1}else{if(i){e=e.replace("#","");d=parseInt(e.substring(0,2),16);h=parseInt(e.substring(2,4),16);c=parseInt(e.substring(4,6),16);f=e.length===8?parseInt(e.substring(6,8),16):1}else{k=e.replace("rgb","").replace("a","").replace(/\s+/g,"").replace("(","").replace(")","").split(",");d=parseInt(k[0]);h=parseInt(k[1]);c=parseInt(k[2]);f=k.length===4?parseInt(k[3]):1}}this.setRGB(d,h,c);this._a=f}});L.rgbColor=function(a){return new L.RGBColor(a)};L.HSLColor=L.Color.extend({initialize:function(a){L.Color.prototype.initialize.call(this,a)},parseColorDef:function(b){var f=b instanceof Array;var g,c,i,d;if(f){g=b[0];c=b[1];i=b[2];d=b.length===4?b[3]:1}else{var e=b.replace("hsl","").replace("a","").replace("(","").replace(/\s+/g,"").replace(/%/g,"").replace(")","").split(",");g=Number(e[0])/360;c=Number(e[1])/100;i=Number(e[2])/100;d=e.length===4?parseInt(e[3]):1}this.setHSL(g,c,i);this._a=d}});L.hslColor=function(a){return new L.HSLColor(a)};L.Animation=L.Class.extend({initialize:function(a,b){this._easeFunction=a;this._animateFrame=b},run:function(b,a){this.stop();this._el=b;this._inProgress=true;this._duration=a.duration||0.25;this._animationOptions=a;this._startTime=+new Date();this.fire("start");this._animate()},stop:function(){if(!this._inProgress){return}this._step();this._complete()},_animate:function(){this._animId=L.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(){var b=+new Date()-this._startTime,a=this._duration*1000;if(b<a){this._runFrame(this._easeFunction(b/a))}else{this._runFrame(1);this._complete()}},_runFrame:function(a){this._animateFrame(a);this.fire("step")},_complete:function(){L.Util.cancelAnimFrame(this._animId);this._inProgress=false;this.fire("end")}});L.ColorBrewer={Sequential:{YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]}},Diverging:{PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]}},Qualitative:{Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}}};L.Palettes={huePalette:function(a,b,c,e,d){return new L.HSLHueFunction(new L.Point(a,c),new L.Point(b,e),d)},luminosityPalette:function(a,b,e,c,d){return new L.HSLLuminosityFunction(new L.Point(a,e),new L.Point(b,c),d)},saturationPalette:function(a,b,d,c,e){return new L.HSLSaturationFunction(new L.Point(a,d),new L.Point(b,c),e)},rgbBlendPalette:function(a,b,c,e,d){return new L.RGBColorBlendFunction(a,b,c,e,d)},hslBlendPalette:function(a,b,c,e,d){return new L.HSLColorBlendFunction(a,b,c,e,d)},customColorPalette:function(a,b,c,d){return new L.CustomColorFunction(a,b,c,d)}};L.DynamicColorPalettes={rainbow:{text:"Rainbow",getPalette:function(a,b,c){return L.Palettes.huePalette(a,b,0,300,c)}},greentored:{text:"Green - Red",getPalette:function(a,b,c){return L.Palettes.huePalette(a,b,120,0,c)}},yellowtored:{text:"Yellow - Red",getPalette:function(a,b,c){return L.Palettes.huePalette(a,b,60,0,c)}},orangetored:{text:"Orange - Red",getPalette:function(a,b,c){return L.Palettes.huePalette(a,b,30,0,c)}},redtopurple:{text:"Red - Purple",getPalette:function(a,b,c){return L.Palettes.huePalette(a,b,360,270,c)}},bluetored:{text:"Blue - Red",getPalette:function(a,b,c){return L.Palettes.huePalette(a,b,210,360,c)}},bluetored2:{text:"Blue - Red 2",getPalette:function(a,b,c){return L.Palettes.huePalette(a,b,180,0,c)}},whitetored:{text:"White - Red",getPalette:function(a,b,c){return L.Palettes.luminosityPalette(a,b,1,0.5,L.Util.extend(option,{outputHue:0}))}},whitetoorange:{text:"White - Orange",getPalette:function(a,b,c){return L.Palettes.luminosityPalette(a,b,1,0.5,L.Util.extend(option,{outputHue:30}))}},whitetoyellow:{text:"White - Yellow",getPalette:function(a,b,c){return L.Palettes.luminosityPalette(a,b,1,0.5,L.Util.extend(option,{outputHue:60}))}},whitetogreen:{text:"White - Green",getPalette:function(a,b,c){return L.Palettes.luminosityPalette(a,b,1,0.5,L.Util.extend(option,{outputHue:120}))}},whitetoltblue:{text:"White - Lt. Blue",getPalette:function(a,b,c){return L.Palettes.luminosityPalette(a,b,1,0.5,L.Util.extend(option,{outputHue:180}))}},whitetoblue:{text:"White - Blue",getPalette:function(a,b,c){return L.Palettes.luminosityPalette(a,b,1,0.5,L.Util.extend(option,{outputHue:240}))}},whitetopurple:{text:"White - Purple",getPalette:function(a,b,c){return L.Palettes.luminosityPalette(a,b,1,0.5,L.Util.extend(option,{outputHue:270}))}},graytored:{text:"Gray - Red",getPalette:function(a,b,c){return L.Palettes.saturationPalette(a,b,0,1,L.Util.extend(option,{outputHue:0}))}},graytoorange:{text:"Gray - Orange",getPalette:function(a,b,c){return L.Palettes.saturationPalette(a,b,0,1,L.Util.extend(option,{outputHue:30}))}},graytoyellow:{text:"Gray - Yellow",getPalette:function(a,b,c){return L.Palettes.saturationPalette(a,b,0,1,L.Util.extend(option,{outputHue:60}))}},graytogreen:{text:"Gray - Green",getPalette:function(a,b,c){return L.Palettes.saturationPalette(a,b,0,1,L.Util.extend(option,{outputHue:120}))}},graytoltblue:{text:"Gray - Lt. Blue",getPalette:function(a,b,c){return L.Palettes.saturationPalette(a,b,0,1,L.Util.extend(option,{outputHue:180}))}},graytoblue:{text:"Gray - Blue",getPalette:function(a,b,c){return L.Palettes.saturationPalette(a,b,0,1,L.Util.extend(option,{outputHue:240}))}},graytopurple:{text:"Gray - Purple",getPalette:function(a,b,c){return L.Palettes.saturationPalette(a,b,0,1,L.Util.extend(option,{outputHue:270}))}}};L.DynamicPaletteElement=L.Class.extend({initialize:function(a,b){this._key=a;this._dynamicPalette=b},generate:function(g){var a=L.DomUtil.create("div","palette");var c=g.count;var h=this._dynamicPalette.getPalette(0,c-1);var k=g.width;var l=true;if(g.showText!=undefined){l=g.showText}a.setAttribute("data-palette-key",this._key);if(this._dynamicPalette.text&&l){L.DomUtil.create("div","palette-text",a).innerHTML='<i class="icon-ok hidden"></i>'+this._dynamicPalette.text}var d=k/c;if(g.className){L.DomUtil.addClass(a,g.className)}for(var b=0;b<c;++b){var b=L.DomUtil.create("i","palette-element");for(var f in h){var j=h[f];var e=j.evaluate?j.evaluate(b):j;L.StyleConverter.setCSSProperty(b,f,e)}b.style.width=d+"px";a.appendChild(b)}return a}});L.RegularPolygon=L.Polygon.extend({statics:{R:6378.137,M_PER_KM:1000},initialize:function(b,a){this._centerLatLng=b;L.Util.setOptions(this,a);L.Polygon.prototype.initialize.call(this,this._getLatLngs(),a)},options:{fill:true,radius:1000,numberOfSides:4,rotation:0,maxDegrees:360},getLatLng:function(){return this._centerLatLng},setRadius:function(a){this.options.radius=a;this._latlngs=this._getLatLngs();this.redraw()},_getLatLngs:function(){var f=this.options.maxDegrees||360;var b=f/Math.max(this.options.numberOfSides,3);var d=f+this.options.rotation;var c=this.options.rotation;var e=[];var a;while(c<d){a=this._getPoint(c);e.push(a);c+=b}return e},_getPoint:function(f){var d=function(j){return j*L.LatLng.DEG_TO_RAD};var h=function(j){return j*L.LatLng.RAD_TO_DEG};var b=d(f);var a=this.options.radius/L.RegularPolygon.M_PER_KM/L.RegularPolygon.R;var c=d(this._centerLatLng.lat);var e=d(this._centerLatLng.lng);var g=Math.asin(Math.sin(c)*Math.cos(a)+Math.cos(c)*Math.sin(a)*Math.cos(b));var i=e+Math.atan2(Math.sin(b)*Math.sin(a)*Math.cos(c),Math.cos(a)-Math.sin(c)*Math.sin(g));g=h(g);i=h(i);return new L.LatLng(g,i)},toGeoJSON:function(){var b={type:"Feature",geometry:{type:"Polygon",coordinates:[[],[]]},properties:this.options};for(var c=0;c<this._latlngs.length;++c){var a=this._latlngs[c];b.coordinates[0].push([a[1],a[0]])}return b}});L.regularPolygon=function(b,a){return new L.RegularPolygon(b,a)};L.Path.XLINK_NS="http://www.w3.org/1999/xlink";var TextFunctions=TextFunctions||{__updatePath:L.Path.prototype._updatePath,_updatePath:function(){this.__updatePath.call(this);if(this.options.text){this._createText(this.options.text)}},_initText:function(){if(this.options.text){this._createText(this.options.text)}},getTextAnchor:function(){if(this._point){return this._point}},setTextAnchor:function(a){if(this._text){this._text.setAttribute("x",a.x);this._text.setAttribute("y",a.y)}},_createText:function(f){if(this._text){this._container.removeChild(this._text)}if(this._pathDef){this._defs.removeChild(this._pathDef)}var h=function(j,k){var l="";for(var m in k){l+=m+": "+k[m]+";"}j.setAttribute("style",l);return j};var e=function(j,k){for(var l in k){j.setAttribute(l,k[l])}return j};this._text=this._createElement("text");var a=document.createTextNode(f.text);if(f.path){var i=f.path;var g=L.Util.guid();var d=this._createElement("path");d.setAttribute("d",this._path.getAttribute("d"));d.setAttribute("id",g);if(!this._defs){this._defs=this._createElement("defs");this._container.appendChild(this._defs)}this._defs.appendChild(d);this._pathDef=d;var c=this._createElement("textPath");if(i.startOffset){c.setAttribute("startOffset",i.startOffset)}if(i.attr){e(c,i.attr)}if(i.style){h(c,i.style)}c.setAttributeNS(L.Path.XLINK_NS,"xlink:href","#"+g);c.appendChild(a);this._text.appendChild(c)}else{this._text.appendChild(a);var b=this.getTextAnchor();this.setTextAnchor(b)}if(f.className){this._text.setAttribute("class",f.className)}else{this._text.setAttribute("class","leaflet-svg-text")}if(f.attr){e(this._text,f.attr)}if(f.style){h(this._text,f.style)}this._container.appendChild(this._text)}};var PathFunctions=PathFunctions||{__updateStyle:L.Path.prototype._updateStyle,_createDefs:function(){this._defs=this._createElement("defs");this._container.appendChild(this._defs)},_createGradient:function(b){if(!this._defs){this._createDefs()}if(this._gradient){this._defs.removeChild(this._gradient)}b=b!==true?L.extend({},b):{};var m=L.Util.guid();this._gradientGuid=m;var n;var a;if(b.gradientType=="radial"){n=this._createElement("radialGradient");var a=b.radial||{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"}}else{n=this._createElement("linearGradient");var g=b.vector||[["0%","0%"],["100%","100%"]];var a={x1:g[0][0],x2:g[1][0],y1:g[0][1],y2:g[1][1]}}a.id="grad"+m;var j=b.stops||[{offset:"0%",style:{color:"rgb(255, 255, 255)",opacity:1}},{offset:"60%",style:{color:this.options.fillColor||this.options.color,opacity:1}}];for(var k in a){n.setAttribute(k,a[k])}for(var l=0;l<j.length;++l){var c=j[l];var h=this._createElement("stop");c.style=c.style||{};for(var k in c){var f=c[k];if(k==="style"){var e="";f.color=f.color||(this.options.fillColor||this.options.color);f.opacity=typeof f.opacity==="undefined"?1:f.opacity;for(var d in f){e+="stop-"+d+":"+f[d]+";"}f=e}h.setAttribute(k,f)}n.appendChild(h)}this._gradient=n;this._defs.appendChild(n)},_createDropShadow:function(e){if(!this._defs){this._createDefs()}if(this._dropShadow){this._defs.removeChild(this._dropShadow)}var j=L.Util.guid();var d=this._createElement("filter");var c=this._createElement("feOffset");var a=this._createElement("feGaussianBlur");var f=this._createElement("feBlend");e=e||{width:"200%",height:"200%"};e.id="filter"+j;for(var g in e){d.setAttribute(g,e[g])}var h={result:"offOut","in":"SourceAlpha",dx:"2",dy:"2"};var i={result:"blurOut","in":"offOut",stdDeviation:"2"};var b={"in":"SourceGraphic",in2:"blurOut",mode:"lighten"};for(var g in h){c.setAttribute(g,h[g])}for(var g in i){a.setAttribute(g,i[g])}for(var g in b){f.setAttribute(g,b[g])}d.appendChild(c);d.appendChild(a);d.appendChild(f);this._dropShadow=d;this._defs.appendChild(d)},_createCustomElement:function(c,b){var a=this._createElement(c);for(var d in b){if(b.hasOwnProperty(d)){a.setAttribute(d,b[d])}}return a},_createImage:function(b){var a=this._createElement("image");a.setAttribute("width",b.width);a.setAttribute("height",b.height);a.setAttribute("x",b.x||0);a.setAttribute("y",b.y||0);a.setAttributeNS(L.Path.XLINK_NS,"xlink:href",b.url);return a},_createPattern:function(b){if(this._pattern){this._defs.removeChild(this._pattern)}var a=this._createCustomElement("pattern",b);this._pattern=a;return a},_createShape:function(b,c){if(this._shape){this._container.removeChild(this._shape)}var a=this._createCustomElement(b,c);return a},_applyCustomStyles:function(){},_createFillPattern:function(a){var c=L.Util.guid();var b=a.pattern;b.id=c;b.patternUnits=b.patternUnits||"objectBoundingBox";var d=this._createPattern(b);var e=this._createImage(a.image);e.setAttributeNS(L.Path.XLINK_NS,"xlink:href",a.url);d.appendChild(e);if(!this._defs){this._createDefs()}this._defs.appendChild(d);this._path.setAttribute("fill","url(#"+c+")")},_getDefaultDiameter:function(a){return 1.75*a},_createShapeImage:function(l){l=l||{};var m=L.Util.guid();var q=this.options.radius||Math.max(this.options.radiusX,this.options.radiusY);var d=this._getDefaultDiameter(q);var i=l.imageSize||new L.Point(d,d);var k=l.radius||d/2;var p=l.shape||{circle:{r:k,cx:0,cy:0}};var j=l.pattern||{width:i.x,height:i.y,x:0,y:0};var o=Object.keys(p);var g=o.length>0?o[0]:"circle";p[g].fill="url(#"+m+")";var f=this._createShape(g,p[g]);if(this.options.clickable){f.setAttribute("class","leaflet-clickable")}j.id=m;j.patternUnits=j.patternUnits||"objectBoundingBox";var e=this._createPattern(j);var l=l.image||{width:i.x,height:i.y,x:0,y:0,url:this.options.imageCircleUrl};var c=this._createImage(l);c.setAttributeNS(L.Path.XLINK_NS,"xlink:href",l.url);e.appendChild(c);this._defs.appendChild(e);this._container.insertBefore(f,this._defs);this._shape=f;var n=this;this._shape.addEventListener("mouseover",function(){n.fire("mouseover")});this._shape.addEventListener("mouseout",function(){n.fire("mouseout")});this._shape.addEventListener("mousemove",function(){n.fire("mousemove")});var h=this.getTextAnchor();if(this._shape&&h){if(this._shape.tagName==="circle"||this._shape.tagName==="ellipse"){this._shape.setAttribute("cx",h.x);this._shape.setAttribute("cy",h.y)}else{var b=this._shape.getAttribute("width");var a=this._shape.getAttribute("height");this._shape.setAttribute("x",h.x-Number(b)/2);this._shape.setAttribute("y",h.y-Number(a)/2)}}},_updateStyle:function(a){this.__updateStyle.call(this,a);var b=a?a:this;if(b.options.stroke){if(b.options.lineCap){b._path.setAttribute("stroke-linecap",b.options.lineCap)}if(b.options.lineJoin){b._path.setAttribute("stroke-linejoin",b.options.lineJoin)}}if(b.options.gradient){b._createGradient(b.options.gradient);b._path.setAttribute("fill","url(#"+b._gradient.getAttribute("id")+")")}else{if(!b.options.fill){b._path.setAttribute("fill","none")}}if(b.options.dropShadow){b._createDropShadow();b._path.setAttribute("filter","url(#"+b._dropShadow.getAttribute("id")+")")}else{b._path.removeAttribute("filter")}if(b.options.fillPattern){b._createFillPattern(b.options.fillPattern)}b._applyCustomStyles()}};if(L.SVG){var SVGStyleFunctions=L.Util.extend(PathFunctions,{__updateStyle:L.SVG.prototype._updateStyle});var SVGTextFunctions=L.Util.extend(TextFunctions,{__updatePath:L.SVG.prototype._updatePath});L.SVG.include(SVGStyleFunctions);L.SVG.include(SVGTextFunctions)}var LineTextFunctions=L.extend({},TextFunctions);LineTextFunctions.__updatePath=L.Polyline.prototype._updatePath;LineTextFunctions.getCenter=function(){var k=this._latlngs,c=k.length,h,e,d,a,b,g;for(h=0,e=c-1,area=0,lat=0,lng=0;h<c;e=h++){d=k[h];a=k[e];b=d.lat*a.lng-a.lat*d.lng;lat+=(d.lat+a.lat)*b;lng+=(d.lng+a.lng)*b;area+=b/2}g=area?new L.LatLng(lat/(6*area),lng/(6*area)):k[0];g.area=area;return g};LineTextFunctions.getTextAnchor=function(){var a=this.getCenter();return this._map.latLngToLayerPoint(a)};L.Polyline.include(LineTextFunctions);L.CircleMarker.include(TextFunctions);L.Path.include(PathFunctions);L.Polygon.include(PathFunctions);L.Polyline.include(PathFunctions);L.CircleMarker.include(PathFunctions);L.CircleMarker=L.CircleMarker.extend({_applyCustomStyles:function(){if(this.options.shapeImage||this.options.imageCircleUrl){this._createShapeImage(this.options.shapeImage)}},getTextAnchor:function(){var a=null;if(this._point){a=new L.Point(this._point.x,this._point.y)}return a}});L.Point.prototype.rotate=function(c,a){var d=this.distanceTo(a);var b=c*L.LatLng.DEG_TO_RAD+Math.atan2(this.y-a.y,this.x-a.x);this.x=a.x+d*Math.cos(b);this.y=a.y+d*Math.sin(b)};L.MapMarker=L.Path.extend({includes:TextFunctions,initialize:function(b,a){L.Path.prototype.initialize.call(this,a);this._latlng=b},options:{fill:true,fillOpacity:1,opacity:1,radius:15,innerRadius:5,position:{x:0,y:0},rotation:0,numberOfSides:50,color:"#000000",fillColor:"#0000FF",weight:1,gradient:true,dropShadow:true,clickable:true},setLatLng:function(a){this._latlng=a;return this.redraw()},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints();if(this.options.innerRadius>0){this._innerPoints=this._getPoints(true).reverse()}},getBounds:function(){var a=this._map,g=this.options.radius*3,e=a.project(this._latlng),b=new L.Point(e.x-this.options.radius,e.y),d=new L.Point(e.x+this.options.radius,e.y-g),f=a.unproject(b),c=a.unproject(d);return new L.LatLngBounds(f,c)},getLatLng:function(){return this._latlng},setRadius:function(a){this.options.radius=a;return this.redraw()},setInnerRadius:function(a){this.options.innerRadius=a;return this.redraw()},setRotation:function(a){this.options.rotation=a;return this.redraw()},setNumberOfSides:function(a){this.options.numberOfSides=a;return this.redraw()},getPathString:function(){var c=this.getTextAnchor();if(this._shape){if(this._shape.tagName==="circle"||this._shape.tagName==="ellipse"){this._shape.setAttribute("cx",c.x);this._shape.setAttribute("cy",c.y)}else{var b=this._shape.getAttribute("width");var a=this._shape.getAttribute("height");this._shape.setAttribute("x",c.x-Number(b)/2);this._shape.setAttribute("y",c.y-Number(a)/2)}}this._path.setAttribute("shape-rendering","geometricPrecision");return new L.SVGPathBuilder(this._points,this._innerPoints).build(6)},getTextAnchor:function(){var a=null;if(this._point){a=new L.Point(this._point.x,this._point.y-2*this.options.radius)}return a},_getPoints:function(f){var j=!f?210:360;var e=!f?j/50:j/Math.max(this.options.numberOfSides,3);var h=!f?j:j+this.options.rotation;var g=!f?-30:this.options.rotation;var a=[];var i;var d;var l=this.options.radius;var k=Math.sqrt(0.75);var c=function(m){return m*L.LatLng.DEG_TO_RAD};var b=this._point;if(!f){a.push(b);a.push(new L.Point(b.x+k*l,b.y-1.5*l))}while(g<h){d=c(g);i=this._getPoint(d,l,f);a.push(i);g+=e}if(!f){a.push(new L.Point(b.x-k*l,b.y-1.5*l))}return a},_getPoint:function(c,d,a){var b=d;d=!a?d:this.options.innerRadius;return new L.Point(this._point.x+this.options.position.x+d*Math.cos(c),this._point.y-2*b+this.options.position.y-d*Math.sin(c))},_applyCustomStyles:function(){if(this.options.shapeImage||this.options.imageCircleUrl){this._createShapeImage(this.options.shapeImage)}},toGeoJSON:function(){return L.Util.pointToGeoJSON.call(this)}});L.mapMarker=function(b,a){return new L.MapMarker(b,a)};L.RegularPolygonMarker=L.Path.extend({includes:TextFunctions,initialize:function(b,a){L.Path.prototype.initialize?L.Path.prototype.initialize.call(this,a):L.setOptions(this,a);this._latlng=b;this.options.numberOfSides=Math.max(this.options.numberOfSides,3)},options:{fill:true,radiusX:10,radiusY:10,rotation:0,numberOfSides:3,position:{x:0,y:0},maxDegrees:360,gradient:true,dropShadow:false,clickable:true},setLatLng:function(a){this._latlng=a;return this.redraw()},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints();if(this.options.innerRadius||this.options.innerRadiusX&&this.options.innerRadiusY){this._innerPoints=this._getPoints(true).reverse()}},getBounds:function(){var a=this._map,j=this.options.radius||this.options.radiusX,i=this.options.radius||this.options.radiusY,h=j*Math.cos(Math.PI/4),e=i*Math.sin(Math.PI/4),f=a.project(this._latlng),b=new L.Point(f.x-h,f.y+e),d=new L.Point(f.x+h,f.y-e),g=a.unproject(b),c=a.unproject(d);return new L.LatLngBounds(g,c)},setRadius:function(a){this.options.radius=a;return this.redraw()},setRadiusXY:function(a,b){this.options.radius=null;this.options.radiusX=a;this.options.radiusY=b;return this.redraw()},setInnerRadius:function(a){this.options.innerRadius=a;return this.redraw()},setInnerRadiusXY:function(a,b){this.options.innerRadius=null;this.options.innerRadiusX=a;this.options.innerRadiusY=b;return this.redraw()},setRotation:function(a){this.options.rotation=a;return this.redraw()},setNumberOfSides:function(a){this.options.numberOfSides=a;return this.redraw()},getLatLng:function(){return this._latlng},getPathString:function(){var c=this.getTextAnchor();if(this._shape){if(this._shape.tagName==="circle"||this._shape.tagName==="ellipse"){this._shape.setAttribute("cx",c.x);this._shape.setAttribute("cy",c.y)}else{var b=this._shape.getAttribute("width");var a=this._shape.getAttribute("height");this._shape.setAttribute("x",c.x-Number(b)/2);this._shape.setAttribute("y",c.y-Number(a)/2)}}this._path.setAttribute("shape-rendering","geometricPrecision");return new L.SVGPathBuilder(this._points,this._innerPoints).build(6)},_getPoints:function(f){var j=this.options.maxDegrees||360;var e=j/Math.max(this.options.numberOfSides,3);var h=j;var g=0;var a=[];var i;var d;var k=!f?this.options.radius||this.options.radiusX:this.options.innerRadius||this.options.innerRadiusX;var b=!f?this.options.radius||this.options.radiusY:this.options.innerRadius||this.options.innerRadiusY;var c=function(l){return l*L.LatLng.DEG_TO_RAD};while(g<h){d=c(g);i=this._getPoint(d,k,b);a.push(i);g+=e}return a},_getPoint:function(d,e,a){var b=this.options.position?this._point.add(new L.Point(this.options.position.x,this.options.position.y)):this._point;var c=new L.Point(b.x+e*Math.cos(d),b.y+a*Math.sin(d));c.rotate(this.options.rotation,b);return c},_getDefaultDiameter:function(c){var b=Math.PI/this.options.numberOfSides;var a=c*Math.cos(b);return 1.75*a},_applyCustomStyles:function(){if(this.options.shapeImage||this.options.imageCircleUrl){this._createShapeImage(this.options.shapeImage)}},toGeoJSON:function(){return L.Util.pointToGeoJSON.call(this)}});L.regularPolygonMarker=function(b,a){return new L.RegularPolygonMarker(b,a)};L.StarMarker=L.RegularPolygonMarker.extend({options:{numberOfPoints:5,rotation:-15,maxDegrees:360,gradient:true,dropShadow:true},setNumberOfPoints:function(a){this.options.numberOfPoints=a;return this.redraw()},_getPoints:function(g){var k=this.options.maxDegrees||360;var f=k/this.options.numberOfPoints;var i=k;var h=0;var a=[];var j,b;var e;var l=!g?this.options.radius||this.options.radiusX:this.options.innerRadius||this.options.innerRadiusX;var c=!g?this.options.radius||this.options.radiusY:this.options.innerRadius||this.options.innerRadiusY;var d=function(m){return m*L.LatLng.DEG_TO_RAD};while(h<i){e=d(h);j=this._getPoint(e,l,c);b=this._getPoint(e+d(f)/2,l/2,c/2);a.push(j);a.push(b);h+=f}return a}});L.starMarker=function(b,a){return new L.StarMarker(b,a)};L.TriangleMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:3,rotation:30,radius:5}});L.triangleMarker=function(b,a){return new L.TriangleMarker(b,a)};L.DiamondMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:4,radiusX:5,radiusY:10}});L.diamondMarker=function(b,a){return new L.DiamondMarker(b,a)};L.SquareMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:4,rotation:45,radius:5}});L.squareMarker=function(b,a){return new L.SquareMarker(b,a)};L.PentagonMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:5,rotation:-18,radius:5}});L.pentagonMarker=function(b,a){return new L.PentagonMarker(b,a)};L.HexagonMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:6,rotation:30,radius:5}});L.hexagonMarker=function(b,a){return new L.HexagonMarker(b,a)};L.OctagonMarker=L.RegularPolygonMarker.extend({options:{numberOfSides:8,rotation:22.5,radius:5}});L.octagonMarker=function(b,a){return new L.OctagonMarker(b,a)};L.SVGMarker=L.Path.extend({initialize:function(a,b){L.Path.prototype.initialize.call(this,b);this._svg=b.svg;if(this._svg.indexOf("<")===0){this._data=this._svg}this._latlng=a},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},setLatLng:function(a){this._latlng=a;this.redraw()},getLatLng:function(){return this._latlng},getPathString:function(){var a=this;var b=function(){var e=a._path.parentNode;while(e.nodeName.toLowerCase()!=="g"){e=e.parentNode}if(a.options.clickable){e.setAttribute("class","leaflet-clickable")}var l=a._data;var i=l.nodeName.toLowerCase()==="svg"?l.cloneNode(true):l.querySelector("svg").cloneNode(true);if(a.options.setStyle){a.options.setStyle.call(a,i)}var o=i.getAttribute("width");var q=i.getAttribute("height");var f=o?o.replace("px",""):"100%";var n=q?q.replace("px",""):"100%";if(f==="100%"){f=a.options.size.x;n=a.options.size.y;i.setAttribute("width",f+(String(f).indexOf("%")!==-1?"":"px"));i.setAttribute("height",n+(String(n).indexOf("%")!==-1?"":"px"))}var p=a.options.size||new L.Point(f,n);var r=new L.Point(p.x/f,p.y/n);var d=e.getElementsByTagName("svg");if(d.length>0){d[0].parentNode.removeChild(d[0])}e.appendChild(i);var h=[];var m=a.options.anchor||new L.Point(-p.x/2,-p.y/2);var j=a._point.x+m.x;var k=a._point.y+m.y;h.push("translate("+j+" "+k+")");h.push("scale("+r.x+" "+r.y+")");if(a.options.rotation){h.push("rotate("+a.options.rotation+" "+f/2+" "+n/2+")")}e.setAttribute("transform",h.join(" "))};if(!this._data){var c=new XMLHttpRequest();c.onreadystatechange=function(){if(this.readyState==4&&this.status==200){a._data=this.responseXML;b()}};c.open("GET",this._svg,true);c.send(null)}else{b()}},toGeoJSON:function(){return pointToGeoJSON.call(this)}});L.MarkerGroup=L.FeatureGroup.extend({initialize:function(a,b){L.FeatureGroup.prototype.initialize.call(this,b);this.setLatLng(a)},setStyle:function(a){return this},setLatLng:function(a){this._latlng=a;this.eachLayer(function(b){if(b.setLatLng){b.setLatLng(a)}});return this},getLatLng:function(a){return this._latlng},toGeoJSON:function(){var a={type:"FeatureCollection",features:[]};var b=function(c){return function(d){c.features.push(L.Util.pointToGeoJSON.call(d))}};this.eachLayer(b(a));return a}});L.BarMarker=L.Path.extend({initialize:function(b,a){L.Path.prototype.initialize.call(this,a);this._latlng=b},options:{fill:true,width:2,maxHeight:10,position:{x:0,y:0},weight:1,color:"#000",opacity:1,gradient:true,dropShadow:false,lineCap:"square",lineJoin:"miter"},setLatLng:function(a){this._latlng=a;return this.redraw()},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints()},getBounds:function(){var a=this._map,e=a.project(this._latlng),g=this.options.width/2,b=new L.Point(e.x-g,e.y),d=new L.Point(e.x+g,e.y-this.options.maxHeight),f=a.unproject(b),c=a.unproject(d);return new L.LatLngBounds(f,c)},getLatLng:function(){return this._latlng},getPathString:function(){this._path.setAttribute("shape-rendering","crispEdges");return new L.SVGPathBuilder(this._points).build()},_getPoints:function(){var b=[];var c=this._point.x+this.options.position.x;var i=this._point.y+this.options.position.y;var g=this.options.width/2;var f,a,e,d;var h=this.options.value/this.options.maxValue*this.options.maxHeight;f=new L.Point(c+g,i);a=new L.Point(c+g,i-h);e=new L.Point(c-g,i-h);d=new L.Point(c-g,i);b=[f,a,e,d];return b}});L.barMarker=function(b,a){return new L.BarMarker(b,a)};L.ChartMarker=L.FeatureGroup.extend({initialize:function(b,a){L.Util.setOptions(this,a);this._layers={};this._latlng=b;this._loadComponents()},setLatLng:function(a){this._latlng=a;return this.redraw()},getLatLng:function(){return this._latlng},_loadComponents:function(){},_highlight:function(a){if(a.weight){a.weight*=2}return a},_unhighlight:function(a){if(a.weight){a.weight/=2}return a},_bindMouseEvents:function(c){var b=this;var a=this.options.tooltipOptions;c.on("mouseover",function(f){var n=this.options;var p=n.key;var q=n.value;var m=f.layerPoint;var j=m.x-this._point.x;var k=m.y-this._point.y;var i=n.iconSize;var r=j;var h=k;var o;var l=5;r=j<0?i.x-j+l:-j-l;h=k<0?i.y-k+l:-k-l;o=new L.Point(r,h);var d={};var s=n.displayText?n.displayText(q):q;d[p]={name:n.displayName,value:s};var g=new L.LegendIcon(d,n,{className:"leaflet-div-icon",iconSize:a?a.iconSize:i,iconAnchor:o});n.marker=new L.Marker(b._latlng,{icon:g});n=b._highlight(n);this.initialize(b._latlng,n);this.redraw();this.setStyle(n);b.addLayer(n.marker)});c.on("mouseout",function(d){var f=this.options;f=b._unhighlight(f);this.initialize(b._latlng,f);this.redraw();this.setStyle(f);b.removeLayer(f.marker)})},bindPopup:function(b,a){this.eachLayer(function(c){c.bindPopup(b,a)})},openPopup:function(b){for(var c in this._layers){var a=this._layers[c];b=b||this._latlng;a.openPopup(b);break}},closePopup:function(){for(var a in this._layers){var b=this._layers[a];latlng=latlng||this._latlng;b.closePopup();break}},redraw:function(){this.clearLayers();this._loadComponents()},toGeoJSON:function(){return L.Util.pointToGeoJSON.call(this)}});L.BarChartMarker=L.ChartMarker.extend({initialize:function(b,a){L.Util.setOptions(this,a);L.ChartMarker.prototype.initialize.call(this,b,a)},options:{weight:1,opacity:1,color:"#000",fill:true,position:{x:0,y:0},width:10,offset:0,iconSize:new L.Point(50,40)},_loadComponents:function(){var n,b,m;var o;var d=this.options;var e;var f;var a=Object.keys(this.options.data);var j=a.length;var c=this.options.width;var h=this.options.offset||0;var g=this.options.data;var i=this.options.chartOptions;var k;e=-(c*j+h*(j-1))/2+c/2;f=0;for(var l in g){n=g[l];k=i[l];b=k.minValue||0;m=k.maxValue||100;d.fillColor=k.fillColor||this.options.fillColor;d.value=n;d.minValue=b;d.maxValue=m;d.position={x:e,y:f};d.width=c;d.maxHeight=k.maxHeight||10;d.key=l;d.value=n;d.displayName=k.displayName;d.opacity=this.options.opacity||1;d.fillOpacity=this.options.fillOpacity||0.7;d.weight=this.options.weight||1;d.color=k.color||this.options.color;d.displayText=k.displayText;o=new L.BarMarker(this._latlng,d);this._bindMouseEvents(o);this.addLayer(o);e+=c+h}}});L.RadialBarMarker=L.Path.extend({initialize:function(b,a){L.Path.prototype.initialize.call(this,a);this._latlng=b},options:{fill:true,radius:10,rotation:0,numberOfSides:30,position:{x:0,y:0},gradient:true,dropShadow:false},setLatLng:function(a){this._latlng=a;return this.redraw()},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints()},getBounds:function(){var a=this._map,j=this.options.radiusX||this.options.radius,i=this.options.radiusY||this.options.radius,h=j*Math.cos(Math.PI/4),e=i*Math.sin(Math.PI/4),f=a.project(this._latlng),b=new L.Point(f.x-h,f.y+e),d=new L.Point(f.x+h,f.y-e),g=a.unproject(b),c=a.unproject(d);return new L.LatLngBounds(g,c)},getLatLng:function(){return this._latlng},getPathString:function(){var d=this.options.endAngle-this.options.startAngle;var b=d>=180?"1":"0";var e=this.options.radiusX||this.options.radius;var a=this.options.radiusY||this.options.radius;var c="M"+this._points[0].x.toFixed(2)+","+this._points[0].y.toFixed(2)+"A"+e.toFixed(2)+","+a.toFixed(2)+" 0 "+b+",1 "+this._points[1].x.toFixed(2)+","+this._points[1].y.toFixed(2)+"L";if(this._innerPoints){c=c+this._innerPoints[0].x.toFixed(2)+","+this._innerPoints[0].y.toFixed(2);c=c+"A"+(e-this.options.barThickness).toFixed(2)+","+(a-this.options.barThickness).toFixed(2)+" 0 "+b+",0 "+this._innerPoints[1].x.toFixed(2)+","+this._innerPoints[1].y.toFixed(2)+"z"}else{c=c+this._point.x.toFixed(2)+","+this._point.y.toFixed(2)+"z"}if(L.Browser.vml){c=Core.SVG.path(c)}this._path.setAttribute("shape-rendering","geometricPrecision");return c},_getPoints:function(){var a=this.options.endAngle-this.options.startAngle;var e=this.options.endAngle+this.options.rotation;var f=this.options.startAngle+this.options.rotation;var g=[];var i="radiusX" in this.options?this.options.radiusX:this.options.radius;var h="radiusY" in this.options?this.options.radiusY:this.options.radius;var c=function(j){return j*L.LatLng.DEG_TO_RAD};if(a===360){e=e-0.1}var b=c(f);var d=c(e);g.push(this._getPoint(b,i,h));g.push(this._getPoint(d,i,h));if(this.options.barThickness){this._innerPoints=[];this._innerPoints.push(this._getPoint(d,i-this.options.barThickness,h-this.options.barThickness));this._innerPoints.push(this._getPoint(b,i-this.options.barThickness,h-this.options.barThickness))}return g},_getPoint:function(b,c,a){return new L.Point(this._point.x+this.options.position.x+c*Math.cos(b),this._point.y+this.options.position.y+a*Math.sin(b))}});L.radialBarMarker=function(b,a){return new L.RadialBarMarker(b,a)};L.PieChartMarker=L.ChartMarker.extend({initialize:function(b,a){L.Util.setOptions(this,a);L.ChartMarker.prototype.initialize.call(this,b,a)},options:{weight:1,opacity:1,color:"#000",fill:true,radius:10,rotation:0,numberOfSides:50,mouseOverExaggeration:1.2,maxDegrees:360,iconSize:new L.Point(50,40)},_highlight:function(d){var b=d.radiusX;var c=d.radiusY;var a=d.barThickness;d.oldBarThickness=a;d.oldRadiusX=b;d.oldRadiusY=c;d.radiusX*=d.mouseOverExaggeration;d.radiusY*=d.mouseOverExaggeration;d.barThickness=d.radiusX-b+a;return d},_unhighlight:function(a){a.radiusX=a.oldRadiusX;a.radiusY=a.oldRadiusY;a.barThickness=a.oldBarThickness;return a},_loadComponents:function(){var k;var l=0;var j=0;var b=0;var m=this.options.maxDegrees||360;var c=this.options.rotation;var e;var g=this.options;var f=this.options.data;var h=this.options.chartOptions;var i;var d;var a=function(p,o){var n=0;if(p[o]){n=parseFloat(p[o])}return n};for(d in f){k=a(f,d);l+=k}if(l>0){for(d in f){k=parseFloat(f[d]);i=h[d];b=k/l;j=b*m;g.startAngle=c;g.endAngle=c+j;g.fillColor=i.fillColor;g.color=i.color||"#000";g.radiusX=this.options.radiusX||this.options.radius;g.radiusY=this.options.radiusY||this.options.radius;g.rotation=0;g.key=d;g.value=k;g.displayName=i.displayName;g.displayText=i.displayText;e=new L.RadialBarMarker(this._latlng,g);this._bindMouseEvents(e);c=g.endAngle;this.addLayer(e)}}}});L.pieChartMarker=function(b,a){return new L.PieChartMarker(b,a)};L.CoxcombChartMarker=L.PieChartMarker.extend({statics:{SIZE_MODE_RADIUS:"radius",SIZE_MODE_AREA:"area"}});L.CoxcombChartMarker=L.CoxcombChartMarker.extend({initialize:function(b,a){L.Util.setOptions(this,a);L.PieChartMarker.prototype.initialize.call(this,b,a)},options:{weight:1,opacity:1,color:"#000",fill:true,radius:10,rotation:0,numberOfSides:50,mouseOverExaggeration:1.2,maxDegrees:360,iconSize:new L.Point(50,40),sizeMode:L.CoxcombChartMarker.SIZE_MODE_AREA},_loadComponents:function(){var r,b,q;var p=0;var u=this.options.maxDegrees||360;var d=this.options.rotation;var f;var c=this.options;var j="radiusX" in this.options?this.options.radiusX:this.options.radius;var i="radiusY" in this.options?this.options.radiusY:this.options.radius;var a=Object.keys(this.options.data);var l=a.length;var h=this.options.data;var k=this.options.chartOptions;var o;p=u/l;for(var e in h){r=parseFloat(h[e]);o=k[e];var b=o.minValue||0;var q=o.maxValue;if(this.options.sizeMode===L.CoxcombChartMarker.SIZE_MODE_RADIUS){var t=new L.LinearFunction(new L.Point(b,0),new L.Point(q,j));var s=new L.LinearFunction(new L.Point(b,0),new L.Point(q,i));c.radiusX=t.evaluate(r);c.radiusY=s.evaluate(r)}else{var m=Math.max(j,i);var n=Math.PI*Math.pow(m,2)/l;var g=new L.LinearFunction(new L.Point(b,0),new L.Point(q,n),{postProcess:function(v){return Math.sqrt(l*v/Math.PI)}});c.radiusX=g.evaluate(r);c.radiusY=c.radiusX}c.startAngle=d;c.endAngle=d+p;c.fillColor=o.fillColor;c.color=o.color||"#000";c.rotation=0;c.key=e;c.value=r;c.displayName=o.displayName;c.displayText=o.displayText;f=new L.RadialBarMarker(this._latlng,c);this._bindMouseEvents(f);d=c.endAngle;this.addLayer(f)}}});L.coxcombChartMarker=function(b,a){return new L.CoxcombChartMarker(b,a)};L.RadialBarChartMarker=L.ChartMarker.extend({initialize:function(b,a){L.Util.setOptions(this,a);L.ChartMarker.prototype.initialize.call(this,b,a)},options:{weight:1,opacity:1,color:"#000",fill:true,radius:10,rotation:0,numberOfSides:30,offset:2,barThickness:5,maxDegrees:360,iconSize:new L.Point(50,40)},_loadComponents:function(){var n,a,m;var k=this.options.rotation;var p=this.options.maxDegrees||360;var e;var c=this.options;var l=this.options.radiusX||this.options.radius;var o=this.options.radiusY||this.options.radius;var f=this.options.data;var i=this.options.chartOptions;var j;var h=this.options.barThickness||4;var g=this.options.offset||2;for(var d in f){n=parseFloat(f[d]);j=i[d];a=j.minValue||0;m=j.maxValue||100;var b=new L.LinearFunction(new L.Point(a,0),new L.Point(m,p));k=b.evaluate(n);c.startAngle=this.options.rotation;c.endAngle=this.options.rotation+k;c.fillColor=j.fillColor;c.radiusX=l;c.radiusY=o;c.barThickness=h;c.rotation=0;c.key=d;c.value=n;c.displayName=j.displayName;c.displayText=j.displayText;c.weight=this.options.weight||1;e=new L.RadialBarMarker(this._latlng,c);this._bindMouseEvents(e);this.addLayer(e);l+=h+g;o+=h+g}}});L.radialBarChartMarker=function(b,a){return new L.RadialBarChartMarker(b,a)};L.StackedRegularPolygonMarker=L.ChartMarker.extend({options:{iconSize:new L.Point(50,40)},initialize:function(b,a){L.Util.setOptions(this,a);L.ChartMarker.prototype.initialize.call(this,b,a)},_loadComponents:function(){var m;var k=0;var l=0;var d;var b=this.options;var e=this.options.data;var h=this.options.chartOptions;var i;var j;var f=[];for(j in e){m=parseFloat(e[j]);i=h[j];minValue=i.minValue||0;maxValue=i.maxValue||100;minRadius=i.minRadius||0;maxRadius=i.maxRadius||10;b.fillColor=i.fillColor||this.options.fillColor;b.value=m;b.minValue=minValue;b.maxValue=maxValue;var a=new L.LinearFunction(new L.Point(minValue,minRadius),new L.Point(maxValue,maxRadius));var g=a.evaluate(m);b.radiusX=k+g;b.radiusY=l+g;b.innerRadiusX=k;b.innerRadiusY=l;b.key=j;b.displayName=i.displayName;b.opacity=this.options.opacity||1;b.fillOpacity=this.options.fillOpacity||0.7;b.weight=this.options.weight||1;b.color=i.color||this.options.color;b.displayText=i.displayText;d=new L.RegularPolygonMarker(this._latlng,b);this._bindMouseEvents(d);k=b.radiusX;l=b.radiusY;if(this.options.drawReverse){f.push(d)}else{this.addLayer(d)}}if(this.options.drawReverse){var c=f.pop();while(c){this.addLayer(c);c=f.pop()}}}});L.RadialMeterMarker=L.ChartMarker.extend({initialize:function(b,a){L.Util.setOptions(this,a);L.ChartMarker.prototype.initialize.call(this,b,a)},options:{weight:1,opacity:1,color:"#000",fill:true,radius:10,rotation:180,numberOfSides:30,offset:2,barThickness:5,maxDegrees:180,iconSize:new L.Point(50,40),backgroundStyle:{fill:true,fillColor:"#707070",fillOpacity:0.2,opacity:0.8,color:"#505050"}},_loadComponents:function(){var l,d,k;var z=this.options.rotation;var t=this.options.maxDegrees||360;var b;var f=this.options;var w=this.options.radiusX||this.options.radius;var v=this.options.radiusY||this.options.radius;var g=this.options.data;var h=this.options.chartOptions;var e;var A=this.options.barThickness||4;var q=z;var m=this.options.numSegments||10;var r=t/m;var j;for(var s in g){l=parseFloat(g[s]);e=h[s];j=this.options.displayOptions?this.options.displayOptions[s]:{};d=e.minValue||0;k=e.maxValue||100;var x=k-d;var a=t/x*(l-d);var p=z+a;var y=z+t;var n=new L.LinearFunction(new L.Point(z,d),new L.Point(y,k));while(q<p){f.startAngle=q;var o=Math.min(r,p-q);f.endAngle=q+o;f.fillColor=e.fillColor;f.radiusX=w;f.radiusY=v;f.barThickness=A;f.rotation=0;f.key=s;f.value=l;f.displayName=e.displayName;f.displayText=e.displayText;var c=n.evaluate(q+o);for(var u in j){f[u]=j[u].evaluate?j[u].evaluate(c):j[u]}b=new L.RadialBarMarker(this._latlng,f);this._bindMouseEvents(b);this.addLayer(b);q+=o}if(this.options.backgroundStyle){if(q<y){var o=y-q;f.endAngle=q+o;f.radiusX=w;f.radiusY=v;f.barThickness=A;f.rotation=0;f.key=s;f.value=l;f.displayName=e.displayName;f.displayText=e.displayText;f.fillColor=null;f.fill=false;f.gradient=false;for(var i in this.options.backgroundStyle){f[i]=this.options.backgroundStyle[i]}var c=n.evaluate(q+o);b=new L.RadialBarMarker(this._latlng,f);this.addLayer(b)}}}}});L.LocationModes={LATLNG:function(e,b){var a=function(i,g){var h=L.Util.getFieldValue(e,i);var j=L.Util.getFieldValue(e,g);var f=null;if(h&&j){var k=new L.LatLng(h,j);f={location:k,text:[k.lat.toFixed(3),k.lng.toFixed(3)].join(", "),center:k}}return f};var c=a(this.options.latitudeField,this.options.longitudeField);if(!c&&this.options.fallbackLocationFields){var b=0;var d;while(!c&&b<this.options.fallbackLocationFields.length){d=this.options.fallbackLocationFields[b];c=a(d.latitudeField,d.longitudeField);b++}}return c},GEOHASH:function(e,b){var d=this.options.geohashField?L.Util.getFieldValue(e,this.options.geohashField):b;var c=decodeGeoHash(d);var a;if(c.latitude[2]&&c.longitude[2]){a=new L.LatLngBounds(new L.LatLng(c.latitude[0],c.longitude[0]),new L.LatLng(c.latitude[1],c.longitude[1]))}return{location:a,text:d,center:a.getCenter()}},GWCOUNTRY:function(h,j){var f=this.options.codeField?L.Util.getFieldValue(h,this.options.codeField):j;var a;var c;var b=L.gwNoLookup||{};var d=L.countries||{};var e=L.countryCentroids||{};var g=f.toUpperCase();f=g;var k=g in b;if(k){f=b[g]||f}if(f){a=d[f];c=e[f]}else{console.log("Code not found: "+g)}var i=new L.GeoJSON(a);return{location:i,text:L.GeometryUtils.getName(a)||f,center:c}},COUNTRY:function(h,k){var f=this.options.codeField?L.Util.getFieldValue(h,this.options.codeField):k;var a;var c;var g=L.codeLookup||{};var j=L.alpha2Lookup||{};var b=L.fips2Lookup||{};var d=L.countries||{};var e=L.countryCentroids||{};var l=f.toUpperCase();f=l;if(f.length===2){f=j[l]||b[l]}else{if(f.length===3){f=g[l]||f}}if(f){a=d[f];c=e[f]}else{console.log("Code not found: "+l)}var i=new L.GeoJSON(a);return{location:i,text:L.GeometryUtils.getName(a)||f,center:c}},STATE:function(f,h){var d=this.options.codeField?L.Util.getFieldValue(f,this.options.codeField):h;var a;var c;var g=L.states||{};var i=L.stateCentroids||{};var e=d.toUpperCase();d=e;a=g[d];c=i[d];var b=new L.GeoJSON(a);return{location:b,text:L.GeometryUtils.getName(a)||d,center:c}},GEOJSON:function(e,g){var f=this.options.geoJSONField;var a=f?L.Util.getFieldValue(e,f):e;var b=null;if(a){var d=this;var c=function(h,i){return d.recordToLayer(h,i)};b=L.GeometryUtils.getGeoJSONLocation(a,e,this.options.locationTextField,c)}return b},LOOKUP:function(f,g){var d=this.options.codeField?L.Util.getFieldValue(f,this.options.codeField):g;this._lookupIndex=this._lookupIndex||L.GeometryUtils.indexFeatureCollection(this.options.locationLookup,this.options.locationIndexField||this.options.codeField);var a=this._lookupIndex[d];var b=null;if(!a&&d.indexOf("0")===0){a=this._lookupIndex[d.substring(1)]}if(a){var e=this;var c=function(h,i){return e.recordToLayer(h,i)};b=L.GeometryUtils.getGeoJSONLocation(a,f,this.options.locationTextField,c)}return b},CUSTOM:function(e,h){var f=this.options.codeField;var d=L.Util.getFieldValue(e,f);var c={};var b;c[d]=e;if(this.options.getLocation){var a=this;var g=function(i,j){a.locationToLayer(j,c[i])};b=this.options.getLocation(c,f,[d],g)}return b}};L.DataLayer=L.LayerGroup.extend({includes:L.Mixin.Events,options:{recordsField:"features",locationMode:L.LocationModes.LATLNG,latitudeField:"geometry.coordinates.1",longitudeField:"geometry.coordinates.0",displayField:null,displayOptions:null,layerOptions:{numberOfSides:4,radius:10,weight:1,color:"#000"},showLegendTooltips:true,tooltipOptions:{iconSize:new L.Point(60,50),iconAnchor:new L.Point(-5,50),mouseOverExaggeration:2},setHighlight:function(a){a.weight=a.weight||1;a.fillOpacity=a.fillOpacity||0.5;a.weight*=2;a.fillOpacity/=1.5;return a},unsetHighlight:function(a){a.weight=a.weight||1;a.fillOpacity=a.fillOpacity||0.25;a.weight/=2;a.fillOpacity*=1.5;return a}},initialize:function(b,a){L.Util.setOptions(this,a);L.LayerGroup.prototype.initialize.call(this,a);b=b||{};this._includeFunction=this.options.filter||this.options.includeLayer;this._markerFunction=this.options.getMarker||this._getMarker;this._addChildLayers();this.addData(b)},_addChildLayers:function(){this._boundaryLayer=new L.LayerGroup();this.addLayer(this._boundaryLayer);this._trackLayer=new L.LayerGroup();this.addLayer(this._trackLayer)},_zoomFunction:function(b){var a=this._map;var d=this;var c=a.getZoom();if(this.options.maxZoom&&c>this.options.maxZoom){this.hiddenLayers=[];this.eachLayer(function(e){d.hiddenLayers.push(e);a.removeLayer(e)})}else{if(this.hiddenLayers){while(this.hiddenLayers.length>0){var f=this.hiddenLayers.pop();a.addLayer(f);if(this.options.backgroundLayer&&f.bringToBack){f.bringToBack()}}this.hiddenLayers=null}}},onAdd:function(a){L.LayerGroup.prototype.onAdd.call(this,a);a.on("zoomend",this._zoomFunction,this)},onRemove:function(a){L.LayerGroup.prototype.onRemove.call(this,a);a.off("zoomend",this._zoomFunction,this)},bringToBack:function(){this.invoke("bringToBack");if(this._trackLayer){this._trackLayer.invoke("bringToBack")}if(this._boundaryLayer){this._boundaryLayer.invoke("bringToBack")}},bringToFront:function(){if(this._boundaryLayer){this._boundaryLayer.invoke("bringToFront")}if(this._trackLayer){this._trackLayer.invoke("bringToFront")}this.invoke("bringToFront")},getBounds:function(){var a;this.eachLayer(function(b){if(b.getBounds){if(!a){a=b.getBounds()}else{a.extend(b.getBounds())}}});return a},_getLocation:function(b,a){return this.options.locationMode.call(this,b,a)},_processLocation:function(a){var b=a.center;return b},_styleBoundary:function(a,c,d){if(a.setStyle){var b;if(this.options.boundaryStyle instanceof Function){b=this.options.boundaryStyle.call(this,d,a)}b=b||this.options.boundaryStyle||L.extend({},c,{fillOpacity:0.2,clickable:false});a.setStyle(b)}return a},_addBoundary:function(c,d,e){var b=c.location;var a;if(this.options.includeBoundary){if(b instanceof L.LatLngBounds){b=new L.Rectangle(b)}b=this._styleBoundary(b,d,e);this._boundaryLayer.addLayer(b);a=b}return a},_getLayer:function(b,d,e){var a=this._addBoundary(b,d,e);b=this._processLocation(b);var c;if(b){c=this._markerFunction.call(this,b,d,e);c.boundaryLayer=a}return c},_getMarker:function(a,c,d){var b;if(a){if(c.numberOfSides>=30&&!(c.innerRadius||c.innerRadiusX&&c.innerRadiusY)){b=new L.CircleMarker(a,c)}else{b=new L.RegularPolygonMarker(a,c)}}return b},_preProcessRecords:function(a){return a},_shouldLoadRecord:function(a){return this._includeFunction?this._includeFunction.call(this,a):true},_loadRecords:function(c){var a;c=this._preProcessRecords(c);for(var b in c){if(c.hasOwnProperty(b)){var e=c[b];e=this.options.deriveProperties?this.options.deriveProperties(e):e;var d=this._shouldLoadRecord(e);if(d){a=this._getLocation(e,b);this.locationToLayer(a,e)}}}},_preloadLocations:function(i){var g=this.options.codeField;var b=[];var c={};for(var f in i){if(i.hasOwnProperty(f)){var e=i[f];var d=L.Util.getFieldValue(e,g);c[d]=e;b.push(d)}}if(this.options.getLocation){var a=this;var h=function(j,k){a.locationToLayer(k,c[j])};this.options.getLocation(c,g,b,h)}},setDisplayOptions:function(a){this.options.displayOptions=a;this.reloadData();return this},setDisplayOption:function(c,b){this.options.displayOptions=this.options.displayOptions||{};if(c in this.options.displayOptions){var a=this.options.displayOptions[c];this.options.displayOptions[c]=L.extend({},a,b)}else{this.options.displayOptions[c]=b}this.reloadData();return this},setFilter:function(a){this.options.filter=a;this.reloadData();return this},setData:function(a){this._data=a;this.reloadData()},reloadData:function(){if(!this._layerIndex){this.clearLayers();this._addChildLayers()}if(this._data){this.addData(this._data)}this.fire("legendChanged",this);return this},addData:function(b){var a=this.options.recordsField!==null&&this.options.recordsField.length>0?L.Util.getFieldValue(b,this.options.recordsField):b;if(this.options.getIndexKey&&!this._layerIndex){this._layerIndex={};this._boundaryIndex={}}if(this.options.locationMode===L.LocationModes.CUSTOM&&this.options.preload){this._preloadLocations(a)}else{this._loadRecords(a)}this._data=b},locationToLayer:function(b,c){var a;a=this.recordToLayer(b,c);if(a){this.addLayer(a)}},_bindMouseEvents:function(k,m,f){var g=this;var d=this.options;var e=d.setHighlight;var c=d.unsetHighlight;var i=d.tooltipOptions;var h=function(q){var n=q.target;var p=this.options||n.options;var s=new L.LegendIcon(f,p,{className:i.className||"leaflet-div-icon",iconSize:i.iconSize,iconAnchor:i.iconAnchor});var o=q.latlng||q.target._latlng;var r=new L.Marker(o,{icon:s});g.addLayer(r);if(g.tooltip){g.removeLayer(g.tooltip);g.tooltip=null}g.tooltip=r;if(e){p=e(p)}if(n.setStyle){n.setStyle(p)}n.isHighlighted=true};var b=function(n){if(g.tooltip){g.tooltip.setLatLng(n.latlng)}};var a=function(n){if(!n.target.isHighlighted){return}n.target.isHighlighted=false;if(g.tooltip){g.removeLayer(g.tooltip);g.tooltip=null}var o=n.target;var p=this.options||o.options;if(c){p=c(p)}if(o.setStyle){o.setStyle(p)}};var l=function(n){n.off("mouseover");n.off("mouseout");n.off("mousemove");n.on({mouseover:h,mouseout:a,mousemove:b})};var j=function(n){if(n.eachLayer){n.eachLayer(function(o){j(o)})}else{l(n)}};j(k)},_getDynamicOptions:function(f){var d=L.Util.extend({},this.options.layerOptions);var b=this.options.displayOptions;var c={};if(b){for(var e in b){var j=b[e];var a=L.Util.getFieldValue(f,e);var i;var g=j.displayText?j.displayText(a):a;c[e]={name:j.displayName,value:g};if(j.styles){d=L.Util.extend(d,j.styles[a]);j.styles[a]=d}else{for(var h in j){i=j[h];d[h]=i.evaluate?i.evaluate(a):i.call?i.call(this,a):i}}}}return{layerOptions:d,legendDetails:c}},_getIndexedLayer:function(f,a,b,d){if(this.options.getIndexKey){var c=this.options.getIndexKey.call(this,a,d);if(c in f){layer=f[c];var g=function(h){if(b.radius&&h instanceof L.CircleMarker){h.setRadius(b.radius)}h.setStyle(b);if(h.setLatLng&&h.getLatLng()!==a.center){h.setLatLng(a.center)}else{h.redraw()}};L.Util.updateLayer(layer,g);if(layer.boundaryLayer){layer.boundaryLayer=this._styleBoundary(layer.boundaryLayer,b,d)}}else{layer=this._getLayer(a,b,d);f[c]=layer}if(this.options.getTrack){var e=!layer.trackLayer;layer.trackLayer=this.options.getTrack.call(this,layer,a,layer.trackLayer);if(e){this._trackLayer.addLayer(layer.trackLayer)}}}else{layer=this._getLayer(a,b,d)}return layer},recordToLayer:function(a,g){var d=L.Util.extend({},this.options.layerOptions);var c;var b={};var h=true;var f=this;if(this._includeFunction){h=this._includeFunction.call(this,g)}if(h){var e=this._getDynamicOptions(g);d=e.layerOptions;b=e.legendDetails;if(a&&d){d.title=a.text;c=this._getIndexedLayer(this._layerIndex,a,d,g);if(c){if(this.options.showLegendTooltips){this._bindMouseEvents(c,d,b)}if(this.options.onEachRecord){this.options.onEachRecord.call(this,c,g,a,this)}}}}return c},getLegend:function(a){return this.options.getLegend?this.options.getLegend.call(this,a):this._getLegend(a)},_getLegendElement:function(u){var k;var o;var w=document.createElement("i");var r=u.displayProperties;var A=u.layerOptions;var c=u.ignoreProperties;var e=u.displayTextFunction;var d=u.index;var l=u.numSegments;var t=u.segmentWidth;var a=u.minValue;var v=u.maxValue;L.StyleConverter.applySVGStyle(w,A);for(var m in r){if(c.indexOf(m)===-1){valueFunction=r[m];if(valueFunction&&(valueFunction.getBounds||r.minValue&&r.maxValue)){var n=valueFunction.getBounds?valueFunction.getBounds():null;var f=n?n[0].x:r.minValue;var q=n?n[1].x:r.maxValue;var h=new L.LinearFunction(new L.Point(0,f),new L.Point(l,q));k=f;o=q;if(e){k=e(f);o=e(q)}if(d===0){a.innerHTML=k;v.innerHTML=o}var p=(q-f)/l;var y=h.evaluate(d);var j=h.evaluate(d+1);var z=valueFunction.evaluate?valueFunction.evaluate(y):valueFunction(y);var g=valueFunction.evaluate?valueFunction.evaluate(j):valueFunction(j);L.StyleConverter.setCSSProperty(w,m,z);if(m==="fillColor"){if(u.gradient){w.style.cssText+="background-image:linear-gradient(left , "+z+" 0%, "+g+" 100%);background-image:-ms-linear-gradient(left , "+z+" 0%, "+g+" 100%);background-image:-moz-linear-gradient(left , "+z+" 0%, "+g+" 100%);background-image:-webkit-linear-gradient(left , "+z+" 0%, "+g+" 100%);"}else{w.style.cssText+="background-color:"+g+";"}}if(m==="color"){w.style.cssText+="border-top-color:"+z+";border-bottom-color:"+g+";border-left-color:"+z+";border-right-color:"+g+";"}if(m==="weight"){w.style.cssText+="border-top-width:"+z+";border-bottom-width:"+g+";border-left-width:"+z+";border-right-width:"+g+";"}var b=p*d+f;var s=b+p;if(e&&valueFunction){b=e(b);s=e(s)}w.setAttribute("title",b+" - "+s)}}}w.style.width=t+"px";return w},_getLegend:function(q){q=q||this.options.legendOptions||{};var g=q.className;var l=document.createElement("div");var w=L.DomUtil.create("div","legend",l);var k=q.numSegments||10;var f=q.width||100;var y=this.options.layerOptions||{};var a=y.weight||0;var r=f/k-2*a;var i;var o=this.options.displayOptions||{};if(g){L.DomUtil.addClass(w,g)}if(q.title){L.DomUtil.create("legend","",w).innerHTML=q.title}var p=function(z){return z};for(var c in o){var m=o[c];if(!m.excludeFromLegend){var t=m.displayName||c;i=m.displayText;var v=i?i:p;var u=m.styles;L.DomUtil.create("div","legend-title",w).innerHTML=t;if(u){w.innerHTML+=new L.CategoryLegend(u).generate()}else{var h=L.DomUtil.create("div","data-layer-legend");var b=L.DomUtil.create("div","min-value",h);var s=L.DomUtil.create("div","scale-bars",h);var x=L.DomUtil.create("div","max-value",h);var d=["displayName","displayText","minValue","maxValue"];for(var e=0;e<k;++e){var j={displayProperties:m,layerOptions:y,ignoreProperties:d,displayTextFunction:v,index:e,numSegments:k,segmentWidth:r,minValue:b,maxValue:x,gradient:q.gradient};var n=this._getLegendElement(j);s.appendChild(n)}w.appendChild(h)}}}return l.innerHTML}});L.dataLayer=function(b,a){return new L.DataLayer(b,a)};L.MapMarkerDataLayer=L.DataLayer.extend({_getMarker:function(a,c,b){return new L.MapMarker(a,c)}});L.mapMarkerDataLayer=function(b,a){return new L.MapMarkerDataLayer(b,a)};L.MarkerDataLayer=L.DataLayer.extend({initialize:function(b,a){this._markerMap={};L.DataLayer.prototype.initialize.call(this,b,a)},options:{recordsField:"features",locationMode:L.LocationModes.LATLNG,latitudeField:"latitude",longitudeField:"longitude",layerOptions:{icon:null},showLegendTooltips:false},_getMarker:function(a,c,b){if(this.options.setIcon){c.icon=this.options.setIcon.call(this,b,c)}return new L.Marker(a,c)},_getLegendElement:function(a){},_getLegend:function(a){return"<span>No legend available</span>"}});L.markerDataLayer=function(b,a){return new L.MarkerDataLayer(b,a)};L.PanoramioLayer=L.MarkerDataLayer.extend({statics:{UPLOAD_DATE_FORMAT:"DD MMM YYYY",SIZE_BY_DATE:"date",SIZE_BY_POPULARITY:"popularity",SIZE_BY_NONE:"none",SIZES:{square:[60,60],mini_square:[32,32]},NUM_PHOTOS:50}});L.PanoramioLayer=L.PanoramioLayer.extend({initialize:function(a){L.MarkerDataLayer.prototype.initialize.call(this,{},a);this._from=0;this._to=L.PanoramioLayer.NUM_PHOTOS;this._calls=[]},options:{recordsField:"photos",latitudeField:"latitude",longitudeField:"longitude",locationMode:L.LocationModes.LATLNG,showLegendTooltips:false,sizeBy:L.PanoramioLayer.SIZE_BY_DATE,layerOptions:{opacity:1},onEachRecord:function(a,f){var d=f.photo_file_url;var g=f.photo_title;var e=this;var h=f.width;var c=f.height;var b=20000;a.on("click",function(k){var p=document.createElement("div");var m=L.DomUtil.create("div","",p);var o=L.DomUtil.create("img","photo",m);o.setAttribute("onload","this.style.opacity=1;");o.setAttribute("src",d);o.style.width=h+"px";var n=L.DomUtil.create("div","photo-info",m);var i=L.DomUtil.create("a","author-link",m);var l=new L.DivIcon({className:"photo-details",html:p.innerHTML,iconAnchor:[h/2,c/2]});var j=new L.Marker(k.target._latlng,{icon:l,zIndexOffset:b});j.on("click",function(q){e.removeLayer(q.target)});a.viewedImage=j;e.viewedImage=j;e.addLayer(j)});if(this.options.onEachPhoto){this.options.onEachPhoto.call(this,a,f)}},setIcon:function(d,c){var f=L.Util.getFieldValue(d,"photo_title");var b=null;if(this._sizeFunction){b=this._sizeFunction.evaluate(d.index)}var a=b?new L.Point(b,b):L.PanoramioLayer.SIZES[this.options.size];var e=d.photo_file_url.replace("/medium/","/"+this.options.size+"/");var g=new L.DivIcon({iconSize:a,className:"",html:'<img class="photo" onload="this.style.opacity=1" title="'+f+'" src="'+e+'"/>'});return g},updateInterval:300000,size:"square",attributionText:'Photos provided by <a href="http://www.panoramio.com"><img src="http://www.panoramio.com/img/glass/components/logo_bar/panoramio.png" style="height: 10px;"/></a>.  Photos provided by <a href="http://www.panoramio.com"><img src="http://www.panoramio.com/img/glass/components/logo_bar/panoramio.png" style="height: 10px;"/></a> are under the copyright of their owners',refreshEvents:"moveend",photoSet:"public"},includes:L.Mixin.Events,onAdd:function(a){L.DataLayer.prototype.onAdd.call(this,a);if(a.attributionControl){a.attributionControl.addAttribution(this.options.attributionText)}var b=this;var c=function(d){b._from=0;b._to=L.PanoramioLayer.NUM_PHOTOS;b.fire("requestingPhotos");if(b._call){clearTimeout(b._call)}var f=function(){b.requestPhotos()};b._call=setTimeout(f,1000)};this.requestPhotos();this._interval=setInterval(c,this.options.updateInterval);this._resetFunction=c;a.on(this.options.refreshEvents,c)},onRemove:function(a){L.DataLayer.prototype.onRemove.call(this,a);if(a.attributionControl){a.attributionControl.removeAttribution(this.options.attributionText)}if(this._interval){clearInterval(this._interval);this._interval=null}a.off(this.options.refreshEvents,this._resetFunction)},calculateSizeByDate:function(b){var c=b.photos;var d=[];for(var e=0;e<c.length;++e){var f=c[e];var g=moment(f.upload_date,L.PanoramioLayer.UPLOAD_DATE_FORMAT);d.push(g);c[e].index=g}d.sort(function(h,i){return h-i});var a=L.PanoramioLayer.SIZES[this.options.size][0];this._sizeFunction=new L.LinearFunction([d[0],a/2],[d[d.length-1],a]);return b},calculateSizeByPopularity:function(d){var a=d.photos;for(var c=0;c<a.length;++c){a[c].index=c}var b=L.PanoramioLayer.SIZES[this.options.size][0];this._sizeFunction=new L.LinearFunction([0,b/2],[a.length,b]);return d},next:function(){this._from=this._to;this._to=this._from+L.PanoramioLayer.NUM_PHOTOS;this.requestPhotos()},previous:function(){this._to=this._from;this._from=this._from-L.PanoramioLayer.NUM_PHOTOS;this.requestPhotos()},requestJsonp:function(d,b,e){var a=this,f="function"+new Date().getTime(),c=[];b.callback="window.LeafletDvfJsonpCallbacks."+f;for(property in b){if(b.hasOwnProperty(property)){c.push(property+"="+encodeURIComponent(b[property]))}}d+=(d.indexOf("?")>0?"&":"?")+c.join("&");if(typeof window.LeafletDvfJsonpCallbacks==="undefined"){window.LeafletDvfJsonpCallbacks={}}window.LeafletDvfJsonpCallbacks[f]=function(g){e.call(a,g);delete window.LeafletDvfJsonpCallbacks[f]};if(this.jsonpScript){document.head.removeChild(this.jsonpScript);this.jsonpScript=null}this.jsonpScript=document.createElement("script");this.jsonpScript.setAttribute("type","text/javascript");this.jsonpScript.setAttribute("async","true");this.jsonpScript.setAttribute("src",d);document.head.appendChild(this.jsonpScript);return{abort:function(){if(f in window.LeafletDvfJsonpCallbacks){window.LeafletDvfJsonpCallbacks[f]=function(){delete window.LeafletDvfJsonpCallbacks[f]}}}}},requestPhotos:function(){var c=this;var d=this._map.getBounds();var b=d.getSouthWest();var e=d.getNorthEast();while(c._calls.length>0){c._calls.pop().abort()}var a=this.requestJsonp("http://www.panoramio.com/map/get_panoramas.php",{set:this.options.photoSet,from:c._from,to:c._to,minx:b.lng,miny:b.lat,maxx:e.lng,maxy:e.lat,size:"medium",mapfilter:"true"},function(f){c._count=f.count;if(moment&&c.options.sizeBy===L.PanoramioLayer.SIZE_BY_DATE){f=c.calculateSizeByDate(f)}else{if(c.options.sizeBy===L.PanoramioLayer.SIZE_BY_POPULARITY){f=c.calculateSizeByPopularity(f)}}c.fire("photosAvailable",f);c.clearLayers();c.addData(f)});c._calls.push(a)}});L.panoramioLayer=function(a){return new L.PanoramioLayer(a)};L.GeohashDataLayer=L.DataLayer.extend({initialize:function(b,a){L.DataLayer.prototype.initialize.call(this,b,a)},options:{recordsField:"features",locationMode:L.LocationModes.GEOHASH,geohashField:"geohash",displayField:null,displayOptions:null,layerOptions:{weight:1,color:"#000"},getIndexKey:function(a,b){return a.text}},_getLayer:function(a,c,b){return new L.Rectangle(a.location,c)}});L.geohashDataLayer=function(b,a){return new L.GeohashDataLayer(b,a)};L.ChoroplethDataLayer=L.DataLayer.extend({initialize:function(b,a){L.DataLayer.prototype.initialize.call(this,b,a)},options:{recordsField:"features",locationMode:L.LocationModes.COUNTRY,codeField:"ISO",displayField:null,displayOptions:null,layerOptions:{weight:1,color:"#000"},maxZoom:16,backgroundLayer:true},_getLayer:function(a,c,b){if(a.location instanceof L.LatLng){a.location=this._markerFunction.call(this,a.location,c,b)}if(a.location.setStyle){c.gradient=a.location instanceof L.Polyline?false:c.gradient;a.location.setStyle(c)}return a.location}});L.choroplethDataLayer=function(b,a){return new L.ChoroplethDataLayer(b,a)};L.ChartDataLayer=L.DataLayer.extend({options:{showLegendTooltips:false},initialize:function(b,a){L.DataLayer.prototype.initialize.call(this,b,a)},_getLayer:function(a,e,g){var i=this._addBoundary(a,e,g);a=this._processLocation(a);var c=this.options.chartOptions;var f=this.options.tooltipOptions;var h={};h=e;h.data={};h.chartOptions=c;for(var d in this.options.chartOptions){h.data[d]=this.options.getFieldValue?this.options.getFieldValue.call(this,g,d):L.Util.getFieldValue(g,d)}for(var d in f){h[d]=f[d]}var b;if(a){b=this._getMarker(a,h);b.boundaryLayer=i}return b},_getMarker:function(b,a){},_getLegend:function(b){var c=L.DataLayer.prototype._getLegend.call(this,b);var a=new L.CategoryLegend(this.options.chartOptions);b=b||this.options.legendOptions;return a.generate(b)}});L.BarChartDataLayer=L.ChartDataLayer.extend({initialize:function(b,a){L.ChartDataLayer.prototype.initialize.call(this,b,a)},_getMarker:function(b,a){return new L.BarChartMarker(b,a)}});L.barChartDataLayer=function(b,a){return new L.BarChartDataLayer(b,a)};L.RadialBarChartDataLayer=L.ChartDataLayer.extend({initialize:function(b,a){L.ChartDataLayer.prototype.initialize.call(this,b,a)},_getMarker:function(b,a){return new L.RadialBarChartMarker(b,a)}});L.radialBarChartDataLayer=function(b,a){return new L.RadialBarChartDataLayer(b,a)};L.PieChartDataLayer=L.ChartDataLayer.extend({initialize:function(b,a){L.ChartDataLayer.prototype.initialize.call(this,b,a)},_getMarker:function(b,a){return new L.PieChartMarker(b,a)}});L.pieChartDataLayer=function(b,a){return new L.PieChartDataLayer(b,a)};L.CoxcombChartDataLayer=L.ChartDataLayer.extend({initialize:function(b,a){L.ChartDataLayer.prototype.initialize.call(this,b,a)},_getMarker:function(b,a){return new L.CoxcombChartMarker(b,a)}});L.coxcombChartDataLayer=function(b,a){return new L.CoxcombChartDataLayer(b,a)};L.StackedRegularPolygonDataLayer=L.ChartDataLayer.extend({initialize:function(b,a){L.ChartDataLayer.prototype.initialize.call(this,b,a)},_getMarker:function(b,a){return new L.StackedRegularPolygonMarker(b,a)}});L.stackedRegularPolygonDataLayer=function(b,a){return new L.StackedRegularPolygonDataLayer(b,a)};L.StackedPieChartDataLayer=L.ChartDataLayer.extend({initialize:function(b,a){L.ChartDataLayer.prototype.initialize.call(this,b,a)},_getMarker:function(b,a){return new L.StackedPieChartMarker(b,a)}});L.stackedPieChartDataLayer=function(b,a){return new L.StackedPieChartDataLayer(b,a)};L.RadialMeterMarkerDataLayer=L.DataLayer.extend({options:{showLegendTooltips:false},initialize:function(b,a){L.DataLayer.prototype.initialize.call(this,b,a)},_getLayer:function(a,e,h){this._addBoundary(a,e);a=this._processLocation(a);var c=this.options.chartOptions;var g=this.options.tooltipOptions;var f=this.options.displayOptions;var i={};i=e;i.data={};i.chartOptions=c;i.displayOptions=f;for(var d in this.options.chartOptions){i.data[d]=L.Util.getFieldValue(h,d)}for(var d in g){i[d]=g[d]}var b;if(a){b=this._getMarker(a,i)}return b},_getMarker:function(b,a){return new L.RadialMeterMarker(b,a)}});L.radialMeterMarkerDataLayer=function(b,a){return new L.RadialMeterMarkerDataLayer(b,a)};L.CalloutLine=L.Path.extend({statics:{LINESTYLE:{ARC:"arc",ANGLE:"angle",STRAIGHT:"straight"},DIRECTION:{NE:"ne",NW:"nw",SE:"se",SW:"sw"}}});L.CalloutLine=L.CalloutLine.extend({initialize:function(a,b){L.Util.setOptions(this,b);L.Path.prototype.initialize.call(this,b);this._latlng=a},options:{size:new L.Point(60,30),position:new L.Point(0,0),color:"#FFFFFF",opacity:1,weight:2,fillColor:"#000000",fill:false,gradient:false,dropShadow:false,direction:L.CalloutLine.DIRECTION.NE,lineStyle:L.CalloutLine.LINESTYLE.ANGLE,lineCap:"butt",lineJoin:"miter",arrow:false},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._points=this._getPoints()},getEndPoint:function(){this.projectLatlngs();return this._points[this._points.length-1]},_getPathAngle:function(){return new L.SVGPathBuilder(this._points,[],{closePath:false}).build(6)},_getPathArc:function(){var f=(this.options.direction||L.CalloutLine.DIRECTION.NE).toLowerCase();var c=f[0];var e=c==="n"?-1:1;var a=this._points[0];var b=this._points[this._points.length-1];var d=["M",a.x,",",a.y," Q",a.x,",",a.y+e*this.options.size.y," ",b.x,",",b.y];return d.join(" ")},_getPoints:function(){var d=this._point.x+this.options.position.x;var e=this._point.y+this.options.position.y;var a=this.options.size.x;var i=this.options.size.y;var j=(this.options.direction||L.CalloutLine.DIRECTION.NE).toLowerCase();var n=[];var k=j[1];var g=j[0];var h=k==="w"?-1:1;var b=g==="n"?-1:1;n.push(new L.Point(d,e));var f=e+b*i;var m=a/2;var l=Math.atan(i/m);if(this.options.lineStyle===L.CalloutLine.LINESTYLE.ARC){l=Math.atan(Math.pow(i,2)/m)}else{if(this.options.lineStyle===L.CalloutLine.LINESTYLE.STRAIGHT){l=Math.atan(i/a)}}this._angle=l;if(this.options.lineStyle!==L.CalloutLine.LINESTYLE.STRAIGHT){var o=new L.Point(d+h*m,f);n.push(o)}var c=new L.Point(d+h*a,f);n.push(c);return n},getBounds:function(){var a=this._map,e=a.project(this._latlng),b=new L.Point(e.x+this.options.position.x,e.y+this.options.position.y),d=new L.Point(b.x+this.options.size.x,b.y-this.options.size.y),f=a.unproject(b),c=a.unproject(d);return new L.LatLngBounds(f,c)},setLatLng:function(a){this._latlng=a;this.redraw()},getLatLng:function(){return this._latlng},getPathString:function(){this._path.setAttribute("shape-rendering","geometricPrecision");var a=this.options.lineStyle||L.CalloutLine.LINESTYLE.ANGLE;var b="";if(a===L.CalloutLine.LINESTYLE.ANGLE||a===L.CalloutLine.LINESTYLE.STRAIGHT){b+=this._getPathAngle()}else{b+=this._getPathArc()}return b}});L.calloutLine=function(a,b){return new L.CalloutLine(a,b)};L.Callout=L.LayerGroup.extend({options:{color:"#FFFFFF",fillColor:"#FFFFFF"},initialize:function(a,b){L.Util.setOptions(this,b);L.LayerGroup.prototype.initialize.call(this,b);this._latlng=a},onAdd:function(a){L.LayerGroup.prototype.onAdd.call(this,a);this.addLayers()},onRemove:function(a){L.LayerGroup.prototype.onRemove.call(this,a);this.clearLayers()},addArrow:function(e,g,d){if(this.options.arrow){var e=L.LatLng.RAD_TO_DEG*e;var c=this.options.numberOfSides||3;var f=this.options.radius||6;var b=180/c;var i={se:b+e,sw:180+b-e,nw:180+b+e,ne:b-e};var a=i[g];var h=new L.RegularPolygonMarker(this._latlng,{position:d,numberOfSides:c,rotation:a,fillColor:this.options.fillColor,color:this.options.color,gradient:this.options.gradient,weight:this.options.weight,opacity:this.options.opacity,fillOpacity:this.options.fillOpacity,radius:f,lineCap:"butt",lineJoin:"miter"});this.addLayer(h)}},addLine:function(){var a={};for(var b in this.options){if(b!=="icon"){a[b]=this.options[b]}}var c=new L.CalloutLine(this._latlng,a);this.addLayer(c);return c},addIcon:function(i,h){var d=this.options.size;var j=this.options.icon;var c=j.options.iconSize;var g=i[0];var b=i[1];var a=b==="w"?c.x+d.x-h.x:-1*(d.x+h.x);var f=g==="n"?c.y/2+d.y-h.y:-1*(-c.y/2+d.y+h.y);j.options.iconAnchor=new L.Point(a,f);var e=new L.Marker(this._latlng,{icon:j});this.addLayer(e)},addLayers:function(){var a=(this.options.direction||"ne").toLowerCase();var b=this.options.position||new L.Point(0,0);var c;c=this.addLine();this.addIcon(a,b);this.addArrow(c._angle,a,b)}});L.callout=function(a,b){return new L.Callout(a,b)};L.FlowLine=L.DataLayer.extend({statics:{LINE_FUNCTION:function(a,b,c){return new L.Polyline([a,b],c)},LINE_FUNCTION_INTERPOLATED:function(d,g,e){var a=this._map.latlngToLayerPoint(d);var c=this._map.latlngToLayerPoint(g);var b=new L.LinearFunction(a,c);var h=Math.ceil(a.distanceTo(c)/e.interpolationOptions.segmentLength);var f=b.samplePoints(h)}}});L.FlowLine=L.FlowLine.extend({initialize:function(b,a){L.Util.setOptions(this,a);L.DataLayer.prototype.initialize.call(this,b,a)},options:{getLine:L.FlowLine.LINE_FUNCTION},onEachSegment:function(g,j,e){var h={};if(this.options.timeField){var c=L.Util.getFieldValue(g,this.options.timeField);var a=L.Util.getFieldValue(j,this.options.timeField);var m=this.options.timeFormat;var o=m?moment(c,m):moment(c);var p=m?moment(a,m):moment(a);var q=p.valueOf()-o.valueOf();h.time=q}for(var n in this.options.displayOptions){var f=L.Util.getFieldValue(g,n);var k=L.Util.getFieldValue(j,n);var l=k-f;var r=l/f*100;h[n]={from:f,to:k,change:l,percentChange:r};if(h.time){h[n].changeOverTime=l/h.time}}var i=e.getLatLngs();var b=i[0].distanceTo(i[1]);var d;if(h.time){d=b/(h.time*1000)}if(this.options.onEachSegment){this.options.onEachSegment.call(this,g,j,e,h,b,d)}},_loadRecords:function(a){var b=[];for(var c in a){if(a.hasOwnProperty(c)){var d=a[c];b=this._addRecord(d,c,b)}}while(b.length>0){this.addLayer(b.pop())}},addRecord:function(a){this._addRecord(a);return this},_addRecord:function(f,g,d){var a=this._getLocation(f,g);var e=this.options.layerOptions;if(a){var b=this._getLayer(a,e,f);var c;var h=true;if(this.options.includeLayer){h=this.options.includeLayer(f)}if(this._lastRecord&&h){var e=this._getDynamicOptions(this._lastRecord);c=this.options.getLine.call(this,this._lastMarker.getLatLng(),b.getLatLng(),e.layerOptions);this.addLayer(c);this.onEachSegment(this._lastRecord,f,c)}if(h){this._lastRecord=f;this._lastMarker=b}}return d}});L.flowLine=function(b,a){return new L.FlowLine(b,a)};L.ArcedFlowLine=L.FlowLine.extend({options:{getLine:function(a,b,c){return new L.ArcedPolyline([a,b],c)}},initialize:function(b,a){L.FlowLine.prototype.initialize.call(this,b,a)}});L.arcedFlowLine=function(b,a){return new L.ArcedFlowLine(b,a)};L.ArcedPolyline=L.Path.extend({includes:TextFunctions,initialize:function(a,b){L.Path.prototype.initialize.call(this,b);this._latlngs=a},options:{distanceToHeight:new L.LinearFunction([0,5],[1000,200]),color:"#FFFFFF",opacity:1,weight:1,fillColor:"#000000",fill:false,gradient:false,dropShadow:false,optimizeSpeed:false},projectLatlngs:function(){this._points=[];for(var a=0;a<this._latlngs.length;++a){this._points.push(this._map.latLngToLayerPoint(this._latlngs[a]))}},getBounds:function(){var a=new L.LatLngBounds();for(var b=0;b<this._latlngs.length;++b){a.extend(this._latlngs[b])}return a},setLatLngs:function(a){this._latlngs=a;this.redraw()},getLatLngs:function(){return this._latlngs},drawSegment:function(e,c){var d=Math.sqrt(Math.pow(c.x-e.x,2)+Math.pow(c.y-e.y,2));var a=this.options.distanceToHeight.evaluate(d);var b=["M",e.x,",",e.y," C",e.x,",",e.y-a," ",c.x,",",c.y-a," ",c.x,",",c.y];return b.join(" ")},getPathString:function(){if(this.options.optimizeSpeed){this._path.setAttribute("shape-rendering","optimizeSpeed")}var b=[];for(var a=0;a<this._points.length-1;++a){b.push(this.drawSegment(this._points[a],this._points[a+1]))}return b.join("")}});L.arcedPolyline=function(a,b){return new L.ArcedPolyline(a,b)};L.Control.Legend=L.Control.extend({options:{position:"bottomright",autoAdd:true},onAdd:function(a){var d="leaflet-control-legend",c=L.DomUtil.create("div",d);var b=this;if(this.options.autoAdd){a.on("layeradd",function(f){var g=f.layer;b.addLayer(g)});a.on("layerremove",function(f){var g=f.layer;b.removeLayer(g)})}this.toggleSize=L.bind(this.toggleSize,this);L.DomEvent.addListener(c,"mouseover",this.toggleSize).addListener(c,"mouseout",this.toggleSize).addListener(c,"touchstart",this.toggleSize).addListener(c,"touchend",this.toggleSize).addListener(c,"click",L.DomEvent.stopPropagation).addListener(c,"click",L.DomEvent.preventDefault);return c},clear:function(){this._container.innerHTML=""},toggleSize:function(){if(L.DomUtil.hasClass(this._container,"larger")){L.DomUtil.removeClass(this._container,"larger")}else{L.DomUtil.addClass(this._container,"larger")}},redrawLayer:function(a){this.removeLayer(a);this.addLayer(a)},addLayer:function(a){var c=L.Util.stamp(a);var b=this;if(a.getLegend){this.addLegend(c,a.getLegend());a.on("legendChanged",function(){b.redrawLayer(a)})}},removeLayer:function(b){var c=L.Util.stamp(b);if(b.getLegend){var a=document.getElementById(c);a.parentNode.removeChild(a);b.off("legendChanged")}},addLegend:function(c,d){var b=this._container,a=document.getElementById(c);if(!a){a=L.DomUtil.create("div","",b);a.id=c}a.innerHTML=d}});L.control.legend=function(a){return new L.Control.Legend(a)};
